import{_ as r,r as i,o as c,c as p,a as t,b as o,d as e,w as s,e as a}from"./app-s5JIphqh.js";const h={},m={href:"http://arxiv.org/abs/2307.07306",target:"_blank",rel:"noopener noreferrer"},u=t("p",null,"â­â­â­â­",-1),d=t("p",null,"arXiv:2307.07306ï¼Œæµ™å¤§",-1),g={href:"https://github.com/bigbigwatermalon/C3SQL",target:"_blank",rel:"noopener noreferrer"},_=a('<h2 id="ä¸€ã€è®ºæ–‡é€Ÿè¯»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»"><span>ä¸€ã€è®ºæ–‡é€Ÿè¯»</span></a></h2><p>ä½¿ç”¨ ChatGPT æ¥è§£å†³ Text2SQL ä»»åŠ¡æ—¶ï¼Œfew-shots ICL çš„ setting éœ€è¦è¾“å…¥å¤§é‡çš„ tokensï¼Œè¿™æœ‰ç‚¹æ˜‚è´µä¸”å¯èƒ½å®é™…ä¸å¯è¡Œã€‚å› æ­¤ï¼Œæœ¬æ–‡å°è¯•åœ¨ zero-shot çš„ setting ä¸‹æ¥è§£å†³ Text2SQL é—®é¢˜ã€‚</p><p>æœ¬æ–‡æå‡ºäº† <mark>C3</mark> æ¥åŸºäº ChatGPT zero-shot å»åš Text2SQLï¼Œå®ç°äº† 1000 tokens per query ä¸‹ä¼˜äº fine-tuning-based methodsã€‚</p><h2 id="äºŒã€c3" tabindex="-1"><a class="header-anchor" href="#äºŒã€c3"><span>äºŒã€C3</span></a></h2><p>C3 ç”±ä¸‰ä¸ªå…³é”®ç»„ä»¶æ„æˆï¼šClear Promptsï¼ˆ<strong>CP</strong>ï¼‰ã€Calibration with Hintsï¼ˆ<strong>CH</strong>ï¼‰ã€Consistency Outputï¼ˆ<strong>CO</strong>ï¼‰ï¼Œåˆ†åˆ«å¯¹åº”ç€æ¨¡å‹è¾“å…¥ã€æ¨¡å‹åå·®å’Œæ¨¡å‹è¾“å‡ºã€‚</p><h3 id="_2-1-clear-prompts-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-1-clear-prompts-ç»„ä»¶"><span>2.1 Clear Prompts ç»„ä»¶</span></a></h3><p><mark>Clear Prompts</mark>ï¼ˆ<strong>CP</strong>ï¼‰ç»„ä»¶çš„ç›®æ ‡æ˜¯ä¸º ChatGPT è§£å†³ Text2SQL ä»»åŠ¡æ„å»ºä¸€ä¸ªæœ‰æ•ˆçš„ promptã€‚å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šClear Layout å’Œ Clear Contextã€‚</p><h4 id="_2-1-1-clear-layout" tabindex="-1"><a class="header-anchor" href="#_2-1-1-clear-layout"><span>2.1.1 Clear Layout</span></a></h4><p>åœ¨ Text2SQL ä¸­ï¼Œæœ‰ä¸¤ç§ prompt layout çš„ stylesï¼š</p><ul><li>ç±»å‹ 1ï¼š<strong>Complicated Layout</strong>ï¼šè¿™ç§ç±»å‹çš„ prompt ç›´æ¥å°† instructionã€question å’Œ context æ‹¼æ¥èµ·æ¥ï¼Œçœ‹èµ·æ¥è¾ƒä¸ºæ‚ä¹±ï¼Œå¦‚ä¸‹å›¾çš„ (a) æ‰€ç¤º</li><li>ç±»å‹ 2ï¼š<strong>Clear Layout</strong>ï¼šè¿™ç§ç±»å‹çš„ prompt ä½¿ç”¨ä¸€ä¸ªæ˜æ˜¾çš„åˆ†éš”ç¬¦å°† instructionã€question å’Œ context åˆ†å¼€ï¼Œçœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ï¼Œå¦‚ä¸‹å›¾çš„ (b) æ‰€ç¤º</li></ul>',10),C=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240607142842.png",alt:"20240607142842",style:{zoom:"75%"}},null,-1),b=a('<p>è®ºæ–‡æŒ‡å‡ºï¼Œä»ç›´è§‰å’Œå®éªŒä¸Šï¼Œéƒ½è¯æ˜äº† clear layout èƒ½äº§ç”Ÿæ›´å¥½çš„è¡¨ç°ã€‚å› æ­¤æœ¬æ–‡ä¸»è¦ä½¿ç”¨æ”¹è¿›åçš„ clear layoutã€‚</p><p>ä½†æ˜¯ï¼Œè®ºæ–‡å‘ç°ç›´æ¥ä½¿ç”¨ä¸Šå›¾çš„ (b) ä½œä¸º prompt ä¼šåœ¨ç”Ÿæˆçš„ SQL ä¸­äº§ç”Ÿå†—ä½™çš„ columnsï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®ºæ–‡åœ¨ instruction éƒ¨åˆ†åé¢åŠ äº†ä¸€å¥ï¼š<em>and do not select extra columns that are not explicitly requested in the query</em>ã€‚</p><h4 id="_2-1-2-clear-context" tabindex="-1"><a class="header-anchor" href="#_2-1-2-clear-context"><span>2.1.2 Clear Context</span></a></h4><p>è®ºæ–‡æŒ‡å‡ºï¼Œåœ¨ prompt context ä¸­åŒ…å«æ•´ä¸ª db schema ä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>åœ¨ prompt å¼•å…¥è¿‡å¤šçš„ä¸ç›¸å…³ schema items ä¼šè®© ChatGPT ç”Ÿæˆ SQL æ—¶å¢åŠ ä¸ç›¸å…³ items çš„ likelihoodã€‚</li><li>ä½¿ç”¨å®Œæ•´çš„ db schema ä¼šè®©æ–‡æœ¬é•¿åº¦è¿‡å¤§ï¼Œå¯¼è‡´ä¸å¿…è¦çš„ API tokens å¼€é”€</li></ol><p>ä¸ºæ­¤ï¼Œè®ºæ–‡æå‡ºéœ€è¦å…ˆè¿›è¡Œ schema linking ä»¥å¬å›ç›¸å…³çš„ tables å’Œ columnsï¼Œå¹¶åªå°†ç›¸å…³çš„ä¿¡æ¯æ”¾å…¥ prompt context ä¸­ã€‚</p><p>æœ¬æ–‡æå‡ºäº†ä¸€ä¸ª ChatGPT-based zero-shot çš„ schema linking çš„æ–¹æ³•ï¼Œåˆ†æˆä¸¤æ­¥ï¼š</p><ul><li><strong>Table Recall</strong>ï¼šä½¿ç”¨ä¸€ä¸ª prompt è®© ChatGPT å¬å›ç›¸å…³ tables</li><li><strong>Column Recall</strong>ï¼šåŸºäº table recall çš„ç»“æœï¼Œä½¿ç”¨ prompt è®© ChatGPT è¿›ä¸€æ­¥å¬å›ç›¸å…³ columns</li></ul><p>Table Recall çš„ prompt ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>',9),T=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240607151442.png",alt:"20240607151442",style:{zoom:"75%"}},null,-1),x=t("p",null,"Column Recall çš„ prompt ç¤ºä¾‹å¦‚ä¸‹ï¼š",-1),L=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240607181507.png",alt:"20240607181507",style:{zoom:"75%"}},null,-1),k=t("h3",{id:"_2-2-calibration-with-hints-ç»„ä»¶",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_2-2-calibration-with-hints-ç»„ä»¶"},[t("span",null,"2.2 Calibration with Hints ç»„ä»¶")])],-1),y=t("p",null,"è®ºæ–‡é€šè¿‡åˆ†æç”Ÿæˆçš„ SQL queryï¼Œå‘ç°äº†å‡ ä¸ªç”±äº ChatGPT å›ºæœ‰çš„ biases é€ æˆçš„ errorsï¼š",-1),S=t("ul",null,[t("li",null,[t("em",null,"Bias 1"),o("ï¼šChatGPT åœ¨ output ä¸­å€¾å‘äºä¿å®ˆï¼ŒSELECT è¯­å¥ä¸­ç»å¸¸å‡ºç°ä¸é—®é¢˜ç›¸å…³ä½†ä¸æ˜¯å¿…éœ€çš„åˆ—ã€‚è€Œä¸”åœ¨æ¶‰åŠåˆ°æ•°é‡é—®é¢˜æ—¶å°¤ä¸ºæ˜æ˜¾ã€‚æ¯”å¦‚ä¸‹å›¾çš„å·¦è¾¹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œ"),t("code",null,"COUNT(*)"),o(" ä»…ç”¨äºæ’åºï¼Œä½† ChatGPT åœ¨ SELECT ä¸­ä¹Ÿå°†å…¶è¾“å‡ºäº†ã€‚")]),t("li",null,[t("em",null,"Bias 2"),o("ï¼šChatGPT ç¼–å†™ SQL æ—¶å€¾å‘äºä½¿ç”¨ LEFT JOINã€ORã€INï¼Œä½†ç»å¸¸æ— æ³•æ­£ç¡®ä½¿ç”¨å®ƒä»¬ã€‚è¿™ç§ bias é€šå¸¸ä¼šå¯¼è‡´æ‰§è¡Œç»“æœä¸­å‡ºç°é¢å¤–çš„å€¼ã€‚")])],-1),f=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240607183150.png",alt:"20240607183150",style:{zoom:"75%"}},null,-1),P=a("<p>ä¸ºäº†æ ¡å‡†è¿™äº› biasï¼Œè®ºæ–‡ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶æ¥å®æ–½æ ¡å‡†ç­–ç•¥ï¼š<mark>Calibration with Hints</mark>ï¼ˆ<strong>CH</strong>ï¼‰ã€‚</p><p>è®ºæ–‡é€šè¿‡å°†ç”¨äºä¿®æ­£ Bias çš„å…ˆéªŒçŸ¥è¯†æ³¨å…¥åˆ°ä¸ ChatGPt çš„å†å²å¯¹è¯ä¸­ã€‚åœ¨å¯¹è¯ history ä¸­ï¼Œæˆ‘ä»¬è®© ChatGPT è®¤ä¸ºè‡ªå·±æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ SQL ç¼–å†™å™¨ï¼Œå¹¶å¼•å¯¼å®ƒå»éµå¾ªæˆ‘ä»¬æå‡ºçš„ debias hintsï¼š</p><ul><li><em><strong>Hint 1</strong></em>ï¼šé’ˆå¯¹ç¬¬ä¸€ä¸ª biasï¼Œè¿™é‡Œè®¾è®¡äº†ä¸€ä¸ª tip å»æŒ‡å¯¼ ChatGPT åªé€‰æ‹©å¿…è¦çš„ columns</li><li><em><strong>Hint 2</strong></em>ï¼šé’ˆå¯¹ç¬¬äºŒä¸ª biasï¼Œè¿™é‡Œè®¾è®¡äº†ä¸€ä¸ª tip æ¥é˜²æ­¢ ChatGPT æ»¥ç”¨ä¸€äº› SQL å…³é”®å­—ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œprompt ä¸­ç›´æ¥è¦æ±‚ ChatGPT å°½é‡é¿å…ä½¿ç”¨ LEFT JOINã€INã€ORï¼Œè€Œä½¿ç”¨ JOIN å’Œ INSERSECTï¼Œè€Œä¸”åœ¨é€‚å½“æ—¶ä½¿ç”¨ DISTINCT æˆ– LIMITï¼Œæ¥é¿å…é‡å¤çš„æ‰§è¡Œç»“æœã€‚</li></ul><p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>",4),Q=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240607191419.png",alt:"20240607191419",style:{zoom:"75%"}},null,-1),G=a('<h3 id="_2-3-consistency-output-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-3-consistency-output-ç»„ä»¶"><span>2.3 Consistency Output ç»„ä»¶</span></a></h3><p>ç”±äº LLM å›ºæœ‰çš„éšæœºæ€§ï¼ŒChatGPT çš„è¾“å‡ºæ˜¯ä¸ç¨³å®šçš„ã€‚è¿™é‡Œå°† Text2SQL ä¹Ÿè§†ä¸º reasoning é—®é¢˜ï¼Œäºæ˜¯ä½¿ç”¨ self-consistency æ€æƒ³æ¥æé«˜æ•ˆæœã€‚</p><p>è®ºæ–‡æå‡ºäº†ä¸€ä¸ª execution-based self-consistency for Text2SQL æ–¹æ³•ï¼Œå°è£…ä¸ºè¿™é‡Œçš„ <mark>Consistency Output</mark>ï¼ˆ<strong>CO</strong>ï¼‰ç»„ä»¶ï¼Œç”¨äºé€‰æ‹© LLM ç”Ÿæˆçš„ SQLã€‚</p><p>è¿™é‡Œçš„æ€æƒ³æ˜¯ï¼Œ<strong>è®© LLM é€šè¿‡å¤šä¸ªæ¨ç†è·¯å¾„æ¥ç”Ÿæˆå¤šä¸ª SQL answersï¼Œç„¶åç§»é™¤æ‰å…¶ä¸­ execution error çš„ SQLï¼Œå¹¶å¯¹å‰©ä½™çš„ SQL è¿›è¡ŒæŠ•ç¥¨ï¼Œä»è€Œé€‰å‡ºæœ€ç»ˆçš„ç­”æ¡ˆ</strong>ã€‚</p><h3 id="_2-4-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_2-4-æ€»ç»“"><span>2.4 æ€»ç»“</span></a></h3><p>C3 çš„æ•´ä½“æ¡†æ¶å¦‚ä¸‹ï¼š</p>',6),w=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240607192336.png",alt:"20240607192336",style:{zoom:"75%"}},null,-1),v=a('<h2 id="ä¸‰ã€å®éªŒ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å®éªŒ"><span>ä¸‰ã€å®éªŒ</span></a></h2><p>è®ºæ–‡åœ¨ Spider æ•°æ®é›†ä¸Šä½¿ç”¨ Execution Accuracyï¼ˆEXï¼‰ä½œä¸ºæŒ‡æ ‡æ¥æµ‹è¯•ã€‚</p><p>æ•´ä½“ä¸Šçš„å®éªŒå‘ç°ï¼ŒC3 åœ¨ Spider æµ‹è¯•é›†ä¸Šä¼˜äºæ‰€æœ‰ä¼ ç»Ÿçš„åŸºäºå¾®è°ƒçš„æ–¹æ³•ï¼Œåœ¨ Spider æ’è¡Œæ¦œä¸Šæ’åç¬¬äºŒã€‚ä¸ top-1 æ–¹æ³•çš„ few-shots settings çš„ DIN-SQL ç›¸æ¯”ï¼Œåªä½¿ç”¨äº†çº¦ 10% çš„ token æ•°é‡ï¼Œè€Œä¸”è¿™é‡Œä½¿ç”¨çš„ GPT-3.5 åœ¨æˆæœ¬ä¸Šä¹Ÿä½äº DIN-SQL ä½¿ç”¨çš„ GPT-4ã€‚æ‰€ä»¥ï¼Œ<strong>C3 æ–¹æ³•æ›´åŠ é¢„ç®—å‹å¥½</strong>ã€‚</p><p>æ­¤å¤–ï¼Œè®ºæ–‡è¿˜åšäº†ä¸å°‘çš„æ¶ˆèå®éªŒï¼Œæ€»ç»“äº† error cases çš„åˆ†æï¼Œå…·ä½“å¯å‚è€ƒåŸè®ºæ–‡ã€‚</p><h2 id="å››ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å››ã€æ€»ç»“"><span>å››ã€æ€»ç»“</span></a></h2><p>æœ¬æ–‡æå‡ºçš„ C3 åŸºäº ChatGPT å®ç°äº† zero-shot Text2SQLï¼Œå¹¶å–å¾—äº† zero-shot çš„æœ€å¥½æ€§èƒ½ã€‚</p><p>C3 ä»æ¨¡å‹è¾“å…¥ã€æ¨¡å‹åå·®å’Œæ¨¡å‹è¾“å‡ºä¸‰ä¸ªè§’åº¦ä¸ºåŸºäº GPT çš„ Text2SQL æä¾›äº†ç³»ç»Ÿçš„å¤„ç†æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•å€¼å¾—åé¢çš„ç ”ç©¶æ¥å‚è€ƒã€‚</p>',7);function I(N,E){const l=i("ExternalLinkIcon"),n=i("center");return c(),p("div",null,[t("blockquote",null,[t("p",null,[o("è®ºæ–‡ï¼š"),t("a",m,[o("C3: Zero-shot Text-to-SQL with ChatGPT"),e(l)])]),u,d,t("p",null,[o("Codeï¼š"),t("a",g,[o("C3SQL | GitHub"),e(l)])])]),_,e(n,null,{default:s(()=>[C]),_:1}),b,e(n,null,{default:s(()=>[T]),_:1}),x,e(n,null,{default:s(()=>[L]),_:1}),k,y,S,e(n,null,{default:s(()=>[f]),_:1}),P,e(n,null,{default:s(()=>[Q]),_:1}),G,e(n,null,{default:s(()=>[w]),_:1}),v])}const q=r(h,[["render",I],["__file","index.html.vue"]]),O=JSON.parse(`{"path":"/arxiv/2307.07306/","title":"ğŸŒ™ C3ï¼šä½¿ç”¨ ChatGPT å®ç° zero-shot Text2SQL","lang":"zh-CN","frontmatter":{"title":"ğŸŒ™ C3ï¼šä½¿ç”¨ ChatGPT å®ç° zero-shot Text2SQL","author":"Bin Yu","createTime":"2024/06/07 11:42:00","permalink":"/arxiv/2307.07306/","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":2,"title":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","slug":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","link":"#ä¸€ã€è®ºæ–‡é€Ÿè¯»","children":[]},{"level":2,"title":"äºŒã€C3","slug":"äºŒã€c3","link":"#äºŒã€c3","children":[{"level":3,"title":"2.1 Clear Prompts ç»„ä»¶","slug":"_2-1-clear-prompts-ç»„ä»¶","link":"#_2-1-clear-prompts-ç»„ä»¶","children":[]},{"level":3,"title":"2.2 Calibration with Hints ç»„ä»¶","slug":"_2-2-calibration-with-hints-ç»„ä»¶","link":"#_2-2-calibration-with-hints-ç»„ä»¶","children":[]},{"level":3,"title":"2.3 Consistency Output ç»„ä»¶","slug":"_2-3-consistency-output-ç»„ä»¶","link":"#_2-3-consistency-output-ç»„ä»¶","children":[]},{"level":3,"title":"2.4 æ€»ç»“","slug":"_2-4-æ€»ç»“","link":"#_2-4-æ€»ç»“","children":[]}]},{"level":2,"title":"ä¸‰ã€å®éªŒ","slug":"ä¸‰ã€å®éªŒ","link":"#ä¸‰ã€å®éªŒ","children":[]},{"level":2,"title":"å››ã€æ€»ç»“","slug":"å››ã€æ€»ç»“","link":"#å››ã€æ€»ç»“","children":[]}],"readingTime":{"minutes":4.71,"words":1412},"git":{"updatedTime":1717830098000,"contributors":[{"name":"yubinCloud","email":"yubin_SkyWalker@yeah.net","commits":2}]},"filePathRelative":"notes/Text2SQL/2307.C3.md","categoryList":[{"type":10000,"name":"notes"},{"type":10004,"name":"Text2SQL"}]}`);export{q as comp,O as data};
