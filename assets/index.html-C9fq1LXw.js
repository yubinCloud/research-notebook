import{_ as r,r as o,o as c,c as d,a as e,b as t,d as n,w as i,e as s}from"./app-s5JIphqh.js";const h={},m={href:"http://arxiv.org/abs/2405.16755",target:"_blank",rel:"noopener noreferrer"},p=e("p",null,"â­â­â­â­",-1),u=e("p",null,"Stanford, arXiv:2405.16755",-1),g=e("h2",{id:"ä¸€ã€è®ºæ–‡é€Ÿè¯»",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ä¸€ã€è®ºæ–‡é€Ÿè¯»"},[e("span",null,"ä¸€ã€è®ºæ–‡é€Ÿè¯»")])],-1),S=e("p",null,"æœ¬æ–‡æå‡ºäº†ä¸€ä¸ª pipeline æ¡†æ¶â€”â€”CHESSâ€”â€”æ¥è§£å†³åº”ç”¨äºå¤æ‚çš„çœŸå®æ•°æ®åº“åœºæ™¯ä¸‹çš„ Text2SQL é—®é¢˜ã€‚",-1),_=e("p",null,[t("åœ¨ç°å®åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“ schema é€šå¸¸åŒ…å«ä¸æ˜ç¡®çš„ column nameã€table name å’Œæ··ä¹±çš„æ•°æ®ï¼Œè¿™éƒ½å¯¹ SQL è½¬æ¢é—®é¢˜æå‡ºäº†æŒ‘æˆ˜ï¼Œå› æ­¤"),e("strong",null,"éœ€è¦ä¸€ä¸ªå¥å£®çš„æ£€ç´¢ç³»ç»Ÿæ¥è¯†åˆ«å‡ºå…¶ä¸­ç›¸å…³çš„ä¿¡æ¯"),t("ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªåœ¨åš Text2SQL æ—¶ä¼šé¢ä¸´çš„æŒ‘æˆ˜ï¼š")],-1),L=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240611154419.png",alt:"20240611154419",style:{zoom:"75%"}},null,-1),b=s('<ul><li>1ï¼‰ç”¨æˆ·é—®é¢˜å¯èƒ½æ²¡æœ‰ç¡®åˆ‡çš„æ•°æ®åº“å€¼</li><li>2ï¼‰column name å¯èƒ½ä¸èƒ½å¾ˆå¥½çš„è¡¨ç¤ºè¿™ä¸€åˆ—å­˜å‚¨äº†ä»€ä¹ˆæ•°æ®ï¼Œå› æ­¤éœ€è¦ database catalogs ä¿¡æ¯æ¥è¾…åŠ©</li><li>3ï¼‰å¯¹äºä¸€ä¸ª questionï¼Œæœ‰å¤šç§ SQL å†™æ³•</li></ul><p><strong>åœ¨ä»¥å¾€çš„ç ”ç©¶ä¸­ï¼Œå¤§å¤šå°† SQL ç”Ÿæˆçš„ä¸Šä¸‹æ–‡é™åˆ¶ä¸º table schemaã€column å®šä¹‰å’Œ sample rowsï¼Œä½†åœ¨ç”Ÿäº§çº§æ•°æ®åº“ä¸­ï¼Œdb catelogã€db value ä¹Ÿæ˜¯é‡è¦çš„è¾…åŠ©ä¿¡æ¯</strong>ã€‚</p><p>æœ¬æ–‡æå‡ºäº† <mark>CHESS</mark>ï¼Œä¸€ä¸ªé’ˆå¯¹ç°å®ä¸–ç•Œçš„å¤æ‚ DB çš„ Text2SQL ç³»ç»Ÿï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ª scalableã€effective çš„ LLM-based çš„ pipeline ç”¨äº SQL ç”Ÿæˆï¼Œä¸»è¦ç”±ä¸‰ä¸ªç»„ä»¶æ„æˆï¼š<strong>entity and context retrievalã€schema selectionã€SQL generation</strong>ã€‚</p><h2 id="äºŒã€chess-pipeline" tabindex="-1"><a class="header-anchor" href="#äºŒã€chess-pipeline"><span>äºŒã€CHESS pipeline</span></a></h2><p>CHESS æ•´ä¸ª pipeline æ‰§è¡Œçš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…±ç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆï¼š</p>',5),y=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240611160246.png",alt:"20240611160246",style:{zoom:"75%"}},null,-1),f=s('<p>è¿™ä¸ªæµç¨‹ä¸­æœ‰ä¸€ä¸ªéœ€è¦è§£å†³çš„å…³é”®é—®é¢˜æ˜¯ï¼š<strong>ç”±äº LLM ä¸Šä¸‹æ–‡çª—å£çš„é™åˆ¶ï¼Œæ— æ³•å°† DB æ‰€æœ‰ä¿¡æ¯éƒ½ä¼ ç»™ LLMï¼Œä½† context åˆä¸èƒ½ç¼ºå¤±æœ‰å…³ä¿¡æ¯ï¼Œå› æ­¤è¿‡æ»¤å‡ºæœ‰ç”¨çš„ DB ä¿¡æ¯æ˜¯éœ€è¦ç‰¹åˆ«å…³æ³¨çš„</strong>ã€‚</p><h3 id="_2-1-entity-and-context-retrieval" tabindex="-1"><a class="header-anchor" href="#_2-1-entity-and-context-retrieval"><span>2.1 Entity and Context Retrieval</span></a></h3><p><strong>è¿™ä¸ª module éœ€è¦å°† user question ä¸­æåŠåˆ°çš„ç›¸å…³ entity å’Œ db schema æå–å‡ºæ¥ï¼Œç”¨äºååºæ­¥éª¤çš„è¾“å…¥</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹åˆ†æˆ 3 æ­¥ï¼š</p><ul><li><strong>Keyword Extraction</strong>ï¼šè¿™ä¸€æ­¥æ˜¯ä» NL ä¸­æå–å‡º keywordsï¼Œä½¿ç”¨çš„æ–¹æ³•å°±æ˜¯ prompt + few-shots ICL æ¥è®© LLM æå–å‡º keywordsã€keyphrasesã€named entitiesã€‚</li><li><strong>Entity Retrieval</strong>ï¼šåœ¨å¾—åˆ° keyword list åï¼Œæˆ‘ä»¬ä»æ•°æ®åº“ä¸­æ£€ç´¢ç›¸ä¼¼çš„å€¼ï¼Œå¹¶ä¸ºæ¯ä¸ª keyword è¿”å›ç›¸å…³çš„ db cell valueï¼Œä»¥åŠå¯¹åº”çš„ columnã€‚è¿™é‡Œçš„æ£€ç´¢æ–¹æ³•é‡‡ç”¨äº†å±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼ˆLSHï¼‰å’Œ semantic embedding similarity æ£€ç´¢çš„<strong>åˆ†å±‚æ£€ç´¢ç­–ç•¥</strong>ï¼Œä»è€Œé«˜æ•ˆåœ°æ£€ç´¢å‡ºä¸ keyword è¯­æ³•å’Œè¯­ä¹‰éƒ½ç›¸ä¼¼çš„ cell valueã€‚</li><li><strong>Context Retrieval</strong>ï¼šé™¤äº† db cell valueï¼Œæ•°æ®åº“ä¸­çš„ catelogs åŒ…å«äº†è§£é‡Š db schema çš„å¯ç”¨ä¿¡æ¯ï¼ˆæ¯”å¦‚æ³¨é‡Šï¼‰ï¼Œè¿™ä¸€æ­¥ä½¿ç”¨ vector db æ¥æ£€ç´¢ä¸ keyword æœ€ç›¸ä¼¼çš„æè¿°ä¿¡æ¯ã€‚</li></ul><h3 id="_2-2-schema-selection" tabindex="-1"><a class="header-anchor" href="#_2-2-schema-selection"><span>2.2 Schema Selection</span></a></h3><p><strong>è¿™ä¸ª module æ˜¯ç¼©å° schema çš„èŒƒå›´ï¼Œä½¿ä¹‹åªåŒ…å«ç”Ÿæˆ SQL æ—¶å¿…è¦çš„ tables å’Œ columns</strong>ã€‚è¿™ç§è¿‡æ»¤åçš„ schema ç§°ä¸º <em>efficient schema</em>ã€‚è¿™é‡Œåˆ†ä¸ºå¦‚ä¸‹æ­¥éª¤ï¼š</p><ul><li><strong>Individual Column Filtering</strong>ï¼šè¿™ä¸€æ­¥æ˜¯ç­›é€‰æ‰ db ä¸­ä¸ç›¸å…³çš„ columnsï¼Œåªå°†æœ€ç›¸å…³çš„ columns ä¼ é€’ç»™è¡¨é€‰æ‹©æ­¥éª¤ã€‚å®ç°æ–¹å¼ä¸Šï¼Œæ˜¯å°†æ¯ä¸ª column ä¸ question çš„ç›¸å…³æ€§è§†ä¸ºä¸€ä¸ªäºŒåˆ†ç±»ä»»åŠ¡ï¼Œæœ¬è´¨ä¸Šæ˜¯è¯¢é—® LLM è¯¥åˆ—æ˜¯å¦å¯èƒ½ä¸ question æœ‰å…³ã€‚æ³¨æ„ï¼Œè¿™ä¸€æ­¥åªå¯¹ç§»é™¤æ˜æ˜¾ä¸ç›¸å…³çš„ columns æœ‰ç”¨ï¼Œä¹‹åä¼šå†æ¬¡è¿‡æ»¤ã€‚</li><li><strong>Table Selection</strong>ï¼šè¿‡æ»¤æ‰ä¸ç›¸å…³çš„ columns ä¹‹åï¼Œè¿™ä¸€æ­¥ç»§ç»­é€‰æ‹©å¿…éœ€çš„ tablesã€‚å®ç°æ–¹å¼æ˜¯ï¼Œå°†å‰ä¸€æ­¥è¿‡æ»¤çš„ schema äº¤ç»™ LLM æ¥è¯„ä¼° table ä¸ question çš„ç›¸å…³æ€§ï¼Œå¹¶åªé€‰æ‹©ä¸ SQL æŸ¥è¯¢æ‰€éœ€è¦çš„ tablesã€‚</li><li><strong>Final Column Selection</strong>ï¼šä»é€‰æ‹©å‡ºçš„ tables ä¸­å†æ¬¡è¿‡æ»¤ columnsï¼Œå°† schema å‡å°‘åˆ°ç”Ÿæˆ SQL æ‰€éœ€çš„æœ€å°åˆ—é›†ã€‚å®ç°æ–¹å¼æ˜¯ï¼Œprompt LLM è®©å®ƒè¯„ä¼°æ¯ä¸€ column çš„å¿…è¦æ€§ï¼ŒåŒ…å«å®ƒçš„ Chain-of-Thought çš„è§£é‡Šã€‚</li></ul><h3 id="_2-3-query-generation" tabindex="-1"><a class="header-anchor" href="#_2-3-query-generation"><span>2.3 Query Generation</span></a></h3><p>å‰é¢çš„æ­¥éª¤å·²ç»é€‰å‡ºäº†ä¸€ä¸ªä¸Šä¸‹æ–‡å¢å¼ºçš„ efficient schemaï¼Œå…¶ä¸­åŒ…å«äº†åˆ›å»º SQL æ‰€éœ€çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ã€‚ä¸‹é¢çš„æ­¥éª¤ä¸­ï¼Œå°±æ˜¯å…ˆç”Ÿæˆä¸€ä¸ªå€™é€‰ SQLï¼Œç„¶åå¯¹æ­¤ SQL æ‰§è¡Œå¹¶è®© LLM ä¿®å¤å…¶ä¸­çš„è¯­ä¹‰å’Œè¯­æ³•é”™è¯¯ã€‚</p><ul><li><strong>Candidate Generation</strong>ï¼šé€šè¿‡ prompt LLM è®©å®ƒç”Ÿæˆä¸€ä¸ªå€™é€‰ SQL</li><li><strong>Revision</strong>ï¼šåŸºäº context å’Œå€™é€‰ SQL çš„æ‰§è¡Œç»“æœï¼Œè¦æ±‚ model è¯„ä¼° SQL æŸ¥è¯¢çš„æ­£ç¡®æ€§ï¼Œå¹¶åœ¨å¿…è¦æ—¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚å…·ä½“å®ç°æ—¶ï¼Œå¯èƒ½ä¼šç»™ä»–ä¸€å¥— rulesï¼ŒåŒæ—¶ä½¿ç”¨ self-consistency ç­‰æŠ€å·§ã€‚</li></ul><h2 id="ä¸‰ã€é¢„å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€é¢„å¤„ç†"><span>ä¸‰ã€é¢„å¤„ç†</span></a></h2><p>åœ¨ CHESS pipeline ä¸­ï¼Œéœ€è¦ä½¿ç”¨ LSH ç®—æ³•æ£€ç´¢å’Œ vector db æ£€ç´¢ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªé¢„å¤„ç†è¿‡ç¨‹æ¥ä¸ºæ•°æ®åº“æ„å»ºæ£€ç´¢ç´¢å¼•ã€‚</p><h2 id="å››ã€å®éªŒ" tabindex="-1"><a class="header-anchor" href="#å››ã€å®éªŒ"><span>å››ã€å®éªŒ</span></a></h2><p>è®ºæ–‡ä¸»è¦åœ¨ BIRD å’Œ Spider ä¸Šåšäº†å®éªŒï¼ŒLLM é€‰æ‹©äº†å¤šç§ç±»å‹è¿›è¡Œäº†å¯¹æ¯”ã€‚</p><p>ä¸‹å›¾æ˜¯ CHESS ä¸ç°æœ‰æ–¹æ³•çš„å¯¹æ¯”ï¼š</p>',15),x=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240611172421.png",alt:"20240611172421",style:{zoom:"75%"}},null,-1),v=e("ul",null,[e("li",null,"çº¢è‰²æ˜¯ CHESS æ¡†æ¶å¹¶ä½¿ç”¨ä¸“ç”¨æ¨¡å‹ï¼Œè“è‰²æ˜¯ä½¿ç”¨äº†å¼€æºé€šç”¨æ¨¡å‹")],-1),k=e("h2",{id:"äº”ã€æ€»ç»“è®¨è®º",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#äº”ã€æ€»ç»“è®¨è®º"},[e("span",null,"äº”ã€æ€»ç»“è®¨è®º")])],-1),C=e("p",null,[t("CHESS pipeline åœ¨ BIRD å’Œ Spider æ•°æ®é›†ä¸Šéƒ½å–å¾—äº†ä¸é”™çš„è¡¨ç°ã€‚æ­¤å¤–ï¼ŒCHESS è¿˜å¼€å‘äº†ä¸€ä¸ªå®Œå…¨å¼€æºçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ç§æœ‰éƒ¨ç½²ï¼Œä¸”åœ¨ BIRD ä¸Šæ‰§è¡Œå‡†ç¡®ç‡è¶…è¿‡ 60%ï¼Œç¼©å°äº†é—­æºå’Œå¼€æº LLM çš„æ€§èƒ½å·®è·ï¼ŒåŒæ—¶ä¿è¯äº†"),e("strong",null,"ä¼ä¸šæ•°æ®éšç§"),t("ã€‚")],-1),Q=e("p",null,"ä½†å¯¹äº BIRD æ•°æ®é›†ï¼Œç›®å‰çš„æ¨¡å‹ä»ç„¶ä¸å¦‚äººç±»å†™ SQL çš„è¡¨ç°ï¼Œæœªæ¥çš„å·¥ä½œåº”è¯¥æ—¨åœ¨è¿›ä¸€æ­¥ç¼©å°è¿™ä¸ªå·®è·ã€‚",-1),E=e("p",null,"æ­¤å¤–ï¼Œè®¾è®¡æ›´é«˜ç²¾åº¦çš„ schema selection æ–¹æ³•æ˜¯æœªæ¥ç ”ç©¶çš„ä¸€ä¸ªé«˜å½±å“é¢†åŸŸï¼Œå¯ä»¥å¯¹å‡†ç¡®æ€§äº§ç”Ÿå·¨å¤§å½±å“ã€‚",-1);function H(w,M){const a=o("ExternalLinkIcon"),l=o("center");return c(),d("div",null,[e("blockquote",null,[e("p",null,[t("è®ºæ–‡ï¼š"),e("a",m,[t("CHESS: Contextual Harnessing for Efficient SQL Synthesis"),n(a)])]),p,u]),g,S,_,n(l,null,{default:i(()=>[L]),_:1}),b,n(l,null,{default:i(()=>[y]),_:1}),f,n(l,null,{default:i(()=>[x]),_:1}),v,k,C,Q,E])}const B=r(h,[["render",H],["__file","index.html.vue"]]),T=JSON.parse(`{"path":"/arxiv/2405.16755/","title":"ğŸŒ™ CHESSï¼šåˆ©ç”¨ä¸Šä¸‹æ–‡æ¥åˆæˆ SQL çš„ pipeline","lang":"zh-CN","frontmatter":{"title":"ğŸŒ™ CHESSï¼šåˆ©ç”¨ä¸Šä¸‹æ–‡æ¥åˆæˆ SQL çš„ pipeline","author":"Bin Yu","createTime":"2024/06/11 15:30:00","permalink":"/arxiv/2405.16755/","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":2,"title":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","slug":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","link":"#ä¸€ã€è®ºæ–‡é€Ÿè¯»","children":[]},{"level":2,"title":"äºŒã€CHESS pipeline","slug":"äºŒã€chess-pipeline","link":"#äºŒã€chess-pipeline","children":[{"level":3,"title":"2.1 Entity and Context Retrieval","slug":"_2-1-entity-and-context-retrieval","link":"#_2-1-entity-and-context-retrieval","children":[]},{"level":3,"title":"2.2 Schema Selection","slug":"_2-2-schema-selection","link":"#_2-2-schema-selection","children":[]},{"level":3,"title":"2.3 Query Generation","slug":"_2-3-query-generation","link":"#_2-3-query-generation","children":[]}]},{"level":2,"title":"ä¸‰ã€é¢„å¤„ç†","slug":"ä¸‰ã€é¢„å¤„ç†","link":"#ä¸‰ã€é¢„å¤„ç†","children":[]},{"level":2,"title":"å››ã€å®éªŒ","slug":"å››ã€å®éªŒ","link":"#å››ã€å®éªŒ","children":[]},{"level":2,"title":"äº”ã€æ€»ç»“è®¨è®º","slug":"äº”ã€æ€»ç»“è®¨è®º","link":"#äº”ã€æ€»ç»“è®¨è®º","children":[]}],"readingTime":{"minutes":4.57,"words":1372},"git":{"updatedTime":1718097928000,"contributors":[{"name":"yubinCloud","email":"yubin_SkyWalker@yeah.net","commits":1}]},"filePathRelative":"notes/Text2SQL/2405.CHESS.md","categoryList":[{"type":10000,"name":"notes"},{"type":10004,"name":"Text2SQL"}]}`);export{B as comp,T as data};
