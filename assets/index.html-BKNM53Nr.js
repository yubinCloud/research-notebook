import{_ as r,r as i,o as c,c as m,a as t,b as s,d as e,w as n,e as a}from"./app-s5JIphqh.js";const p={},d={href:"http://arxiv.org/abs/2305.11853",target:"_blank",rel:"noopener noreferrer"},h=t("p",null,"â­â­â­â­",-1),u=t("p",null,"arXiv:2305.11853, NeurlPS 2023",-1),g={href:"https://github.com/shuaichenchang/prompt-text-to-sql",target:"_blank",rel:"noopener noreferrer"},_=a('<h2 id="ä¸€ã€è®ºæ–‡é€Ÿè¯»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»"><span>ä¸€ã€è®ºæ–‡é€Ÿè¯»</span></a></h2><p>æœ¬æ–‡ä¸»è¦æ˜¯åœ¨ä¸‰ç§å¸¸è§çš„ Text2SQL ICL settings è¯„ä¼°ä¸åŒçš„ prompt construction strategiesã€‚</p><h2 id="äºŒã€text2sql-icl-settings" tabindex="-1"><a class="header-anchor" href="#äºŒã€text2sql-icl-settings"><span>äºŒã€Text2SQL ICL settings</span></a></h2><p>è®ºæ–‡åœ¨ä¸‹é¢ä¸‰ç§ Text2SQL settings ä¸‹æ¥åšçš„è¯„ä¼°ï¼š</p><ul><li><strong>Zero-shot Text2SQL</strong>ï¼šè¾“å…¥ä¸€ä¸ª task instructionã€ä¸€ä¸ª test question ä»¥åŠç›¸åº”çš„ DBï¼Œåœ¨æ²¡æœ‰ä»»ä½• demonstrations æƒ…å†µä¸‹è®© LLM ç›´æ¥æ¨ç†å‡º SQL</li><li><strong>Single-domain Few-shot Text2SQL</strong>ï¼šICL çš„ demonstrations æ˜¯æ„é€ è‡ªä¸ test question ç›¸åŒçš„ databaseã€‚è¿™ä¸ª setting çš„ç›®æ ‡æ˜¯è¯„ä¼° LLM åœ¨æœ€å°çš„åŸŸå†…è®­ç»ƒæ•°æ®ä¸‹æ‰§è¡Œ Text2SQL çš„èƒ½åŠ›ã€‚</li><li><strong>Cross-domain Few-shot Text2SQL</strong>ï¼šICL çš„ demonstrations æ˜¯æ„é€ è‡ªä¸ test question çš„ä¸åŒçš„ database ä¸­ã€‚è¿™ä¸ª setting çš„ç›®æ ‡æ˜¯è¯„ä¼° LLM é€šè¿‡ out-of-domain demonstrations ä¸­æ¥å­¦ä¹ çš„æ³›åŒ–èƒ½åŠ›ã€‚</li></ul><h2 id="ä¸‰ã€prompt-construction" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€prompt-construction"><span>ä¸‰ã€Prompt Construction</span></a></h2><p>è®ºæ–‡åœ¨æ¯ä¸ª Text2SQL setting ä¸­æµ‹è¯•äº†ä¸åŒçš„ prompt construction çš„æ•ˆæœã€‚</p><p>ä¸€ä¸ª prompt ä¸­åŒ…å« Database Prompt å’Œ Demonstration Promptã€‚</p><h3 id="_3-1-database-prompt" tabindex="-1"><a class="header-anchor" href="#_3-1-database-prompt"><span>3.1 Database Prompt</span></a></h3><p>ä¸€ä¸ªå…³ç³»å‹ DB åŒ…å« database schema å’Œ database contentï¼š</p><ul><li>database schema ç”± table headers å’Œ tables ä¹‹é—´çš„ relationships ç»„æˆã€‚</li><li>database content æŒ‡çš„æ˜¯å­˜å‚¨åœ¨ tables ä¸­çš„ data</li></ul><h4 id="_3-1-1-database-schema-çš„-prompt-ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_3-1-1-database-schema-çš„-prompt-ç»“æ„"><span>3.1.1 Database Schema çš„ prompt ç»“æ„</span></a></h4><p>ä¸‹å›¾å±•ç¤ºäº†ä¹‹å‰çš„ç ”ç©¶ä¸­ä½¿ç”¨çš„ database schema çš„å„ç§ prompt ç»“æ„ï¼š</p>',13),b=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240606200416.png",alt:"20240606200416",style:{zoom:"75%"}},null,-1),x=t("p",null,"åŒæ—¶ä¸ºäº†ä¿è¯æ–‡æœ¬çš„ä¸€è‡´æ€§ï¼Œè®ºæ–‡å¯¹ db schema å’Œ SQL åšäº†è§„èŒƒåŒ–ï¼šå°† SQL ä¸­é™¤äº†æ•°æ®åº“å†…å®¹ä¹‹å¤–çš„æ‰€æœ‰å•è¯è½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç»Ÿä¸€æ–‡æœ¬ä¸­çš„ç©ºæ ¼å’Œæ¢è¡Œç¬¦ã€‚å¦‚ä¸‹å›¾å°±æ˜¯è§„èŒƒåŒ–å‰åçš„ç¤ºä¾‹ï¼š",-1),L=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240606201528.png",alt:"20240606201528",style:{zoom:"75%"}},null,-1),S=t("h4",{id:"_3-1-2-database-content-çš„-prompt-ç»“æ„",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_3-1-2-database-content-çš„-prompt-ç»“æ„"},[t("span",null,"3.1.2 Database Content çš„ prompt ç»“æ„")])],-1),T=t("p",null,"ä¹‹å‰çš„ç ”ç©¶å†…å®¹ä¹Ÿè¡¨ç¤ºï¼Œäº†è§£æ•°æ®åº“çš„å†…å®¹ç¤ºä¾‹å¯ä»¥æé«˜æ¨¡å‹çš„æ€§èƒ½ã€‚",-1),f=t("p",null,"ä¸‹å›¾å±•ç¤ºäº† Database Content éƒ¨åˆ†çš„ prompt styleï¼š",-1),k=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240606200843.png",alt:"20240606200843",style:{zoom:"75%"}},null,-1),Q=a('<ul><li><em>InsertRow</em>ï¼šé€šè¿‡ <code>INSERT INTO</code> è¯­å¥æ˜¾ç¤ºæ¯ä¸ª table çš„å‡ è¡Œæ•°æ®</li><li><em>SelectRow</em>ï¼šæ˜¾ç¤º <code>SELECT * FROM T LIMIT X</code> çš„æŸ¥è¯¢ç»“æœ</li><li><em>SelectCol</em>ï¼šæŒ‰ç…§åˆ—å¼çš„æ ¼å¼æ˜¾ç¤ºå¤šè¡Œæ•°æ®</li></ul><p>æœ¬æ–‡æå‡ºä½¿ç”¨ <code>SELECT DISTINCT [Column] FROM [Table] LIMIT R</code> å»åˆ—å‡º R è¡Œæ•°æ®ï¼Œä»è€Œé¿å…é‡å¤ã€‚</p><h3 id="_3-2-demonstration-prompt" tabindex="-1"><a class="header-anchor" href="#_3-2-demonstration-prompt"><span>3.2 Demonstration Prompt</span></a></h3><p>åœ¨ few-shots settings ä¸­ï¼Œdemonstrations è¢«æ”¾å…¥ prompt text æ¥è¾“å…¥ç»™ LLMã€‚</p><p>åœ¨ single-domain few-shot setting ä¸­ï¼Œè¿™é‡Œèå…¥äº†ä¸€äº› question-SQL çš„ pairs ä½œä¸º demonstrationsã€‚</p><p>åœ¨ cross-domain few-shot setting ä¸­ï¼Œä»¥å¾€çš„ç ”ç©¶éƒ½æ˜¯ï¼š</p><ul><li>è¦ä¹ˆ N ä¸ª examples éƒ½æ¥è‡ªäºä¸€ä¸ªç›¸åŒçš„ db</li><li>è¦ä¹ˆ N ä¸ª examples çš„æ¯ä¸€ä¸ªæ¥è‡ªäºä¸åŒçš„ db</li></ul>',7),C=t("p",null,[s("æœ¬æ–‡è€ƒè™‘äº†æ›´æ³›ç”¨çš„åœºæ™¯ï¼šN ä¸ª examples æ˜¯ç”± M ä¸ª db ç»„æˆï¼Œæ¯ä¸ª db ç”± K ä¸ª question-SQL pairsï¼Œç”±æ­¤ "),t("span",{class:"katex"},[t("span",{class:"katex-mathml"},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("semantics",null,[t("mrow",null,[t("mi",null,"M"),t("mo",null,"Ã—"),t("mi",null,"K"),t("mo",null,"="),t("mi",null,"N")]),t("annotation",{encoding:"application/x-tex"},"M \\times K = N")])])]),t("span",{class:"katex-html","aria-hidden":"true"},[t("span",{class:"base"},[t("span",{class:"strut",style:{height:"0.7667em","vertical-align":"-0.0833em"}}),t("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"M"),t("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),t("span",{class:"mbin"},"Ã—"),t("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),t("span",{class:"base"},[t("span",{class:"strut",style:{height:"0.6833em"}}),t("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"K"),t("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),t("span",{class:"mrel"},"="),t("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),t("span",{class:"base"},[t("span",{class:"strut",style:{height:"0.6833em"}}),t("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])])]),s("ã€‚")],-1),y=a('<h2 id="å››ã€å®éªŒ" tabindex="-1"><a class="header-anchor" href="#å››ã€å®éªŒ"><span>å››ã€å®éªŒ</span></a></h2><p>æœ¬æ–‡åœ¨ Spider æ•°æ®é›†çš„ dev split ä¸Šå®éªŒï¼Œé‡‡ç”¨æ‰§è¡Œç²¾åº¦ï¼ˆEXï¼‰æ¥è¯„ä¼° predicted SQL å’Œ gold SQLã€‚</p><p>è¿™é‡Œè®ºæ–‡æŒ‡å‡ºï¼Œåœ¨é€‰æ‹© few-shots çš„ demonstrations æ—¶ï¼Œç”±äºå°‘æ•° db åŒ…å«é•¿æ¨¡å¼ï¼Œè¿™æœ‰å¯èƒ½å¯¼è‡´ prompt token æ•°é‡è¶…è¿‡ LLM é™åˆ¶ï¼Œæ‰€ä»¥åœ¨æ„é€  CreateTable prompt æ—¶ï¼Œè¿™é‡Œåªä½¿ç”¨ token å°‘äº 1000 çš„ dbã€‚</p><p>å…·ä½“çš„å®éªŒç»†èŠ‚å¯ä»¥å‚è€ƒåŸè®ºæ–‡ã€‚</p><h2 id="äº”ã€å®éªŒç»“æœ" tabindex="-1"><a class="header-anchor" href="#äº”ã€å®éªŒç»“æœ"><span>äº”ã€å®éªŒç»“æœ</span></a></h2><p>è¿™ä¸€ç« ä»‹ç»äº†åœ¨ zero-shotã€single-domain å’Œ cross-domain çš„ä¸‰ç§ settings ä¸‹ Text2SQL çš„ç»éªŒå‘ç°ã€‚</p><h3 id="_5-1-zero-shot-çš„-text2sql" tabindex="-1"><a class="header-anchor" href="#_5-1-zero-shot-çš„-text2sql"><span>5.1 zero-shot çš„ Text2SQL</span></a></h3><p>zero-shot setting ä¸­é‡ç‚¹å…³æ³¨äºæ¯”è¾ƒä¸åŒçš„ database prompt constructionã€‚ä¸‹å›¾å±•ç¤ºäº†å¤šç§ database prompt çš„ Codex å’Œ ChatGPT çš„è¡¨ç°ï¼š</p>',8),M=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240606203521.png",alt:"20240606203521",style:{zoom:"75%"}},null,-1),q=t("p",null,"å®éªŒå‘ç°ï¼š",-1),w=t("ul",null,[t("li",null,"è§„èŒƒåŒ–åçš„ db schema å’Œ SQL å¯ä»¥æœ‰æ›´å¥½çš„è¡¨ç°"),t("li",null,"db table çš„ relationship å’Œ content æ˜¯å¾ˆé‡è¦çš„ï¼Œæœ‰æ•ˆåœ°æé«˜äº† LLM çš„è¡¨ç°"),t("li",null,"Codex åœ¨ zero-shot Text2SQL ä»»åŠ¡ä¸Šå§‹ç»ˆä¼˜äº ChatGPT")],-1),v=t("p",null,"åŸºäºä»¥ä¸Šå‘ç°ï¼Œè®ºæ–‡å»ºè®®å°† Codex ä¸è§„èŒƒåŒ–åçš„ CreateTable-SelectCol prompt construction ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œæ¥å®ç° zero-shot çš„ Text2SQLã€‚",-1),I=t("h3",{id:"_5-2-single-domain-çš„-text2sql",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_5-2-single-domain-çš„-text2sql"},[t("span",null,"5.2 single-domain çš„ Text2SQL")])],-1),z=t("p",null,"ä¸‹å›¾å±•ç¤ºäº†åœ¨ Codex å’Œ ChatGPT ä¸Šåš single-domain Text2SQL ä»»åŠ¡æ—¶ï¼Œä¸åŒçš„ in-domain examples çš„æ‰§è¡Œç²¾ç¡®åº¦çš„å®éªŒç»“æœï¼š",-1),P=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240606204228.png",alt:"20240606204228",style:{zoom:"75%"}},null,-1),N=t("p",null,"å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š",-1),D=t("ul",null,[t("li",null,"in-domain çš„ demonstrations èƒ½æœ‰æ•ˆæå‡ LLM çš„è¡¨ç°ï¼Œå¹¶éšç€ç¤ºä¾‹æ•°é‡çš„æé«˜ï¼ŒLLM çš„æ•ˆæœä¹Ÿåœ¨é€æ¸å˜å¥½"),t("li",null,"LLM èƒ½å¤Ÿä» in-domain demonstrations ä¸­å¿«é€Ÿå­¦ä¹ åˆ° table relationshipï¼Œä½†éš¾ä»¥ä»ä¸­å­¦ä¹ åˆ° table content çš„çŸ¥è¯†ï¼Œå› æ­¤ table content çš„ prompt æ˜¯é‡è¦çš„")],-1),E=t("h3",{id:"_5-3-cross-domain-çš„-text2sql",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_5-3-cross-domain-çš„-text2sql"},[t("span",null,"5.3 cross-domain çš„ Text2SQL")])],-1),R=t("p",null,"ICL çš„ demonstrations ä¸­ä½¿ç”¨äº† M çš„ demonstration databasesï¼Œæ¯ä¸€ä¸ªåŒ…å« K ä¸ª NLQ-SQL pairsã€‚",-1),B=t("p",null,"ä¸‹é¢è¿™ä¸ªçƒ­åŠ›å›¾å±•ç¤ºäº† M å’Œ K çš„ä¸ªæ•°å¯¹ç²¾ç¡®åº¦çš„å½±å“ï¼ˆæ¨ªè½´æ˜¯ Mï¼Œçºµè½´æ˜¯ Kï¼Œé¢œè‰²è¶Šæ·±ï¼Œç²¾ç¡®åº¦è¶Šé«˜ï¼‰ï¼š",-1),K=t("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240606205110.png",alt:"20240606205110",style:{zoom:"75%"}},null,-1),j=t("p",null,"è¿™é‡Œå¯¹å®éªŒçš„åˆ†æå¯ä»¥å‚è€ƒåŸè®ºæ–‡ã€‚",-1),H=t("p",null,[t("strong",null,"æ€»ä¹‹ï¼Œout-of-domain çš„ demonstrations å¢å¼ºäº† LLM åœ¨ Text2SQL ä¸­çš„èƒ½åŠ›ï¼Œä½†è¿™äº›ç¤ºä¾‹å¹¶æ²¡æœ‰æä¾›ç‰¹å®šäº DB çš„çŸ¥è¯†ï¼Œå› æ­¤ï¼Œä»”ç»†æ„å»º Database Prompt ä»ç„¶è‡³å…³é‡è¦"),s("ï¼Œè¿™ä¹Ÿä¸åœ¨ zero-shot setting ä¸­æ‰€åšçš„è§‚å¯Ÿæ˜¯ä¸€è‡´çš„ã€‚")],-1),F=t("h2",{id:"å…­ã€æ€»ç»“",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#å…­ã€æ€»ç»“"},[t("span",null,"å…­ã€æ€»ç»“")])],-1),G=t("p",null,"æ•´çš„æ¥è¯´ï¼Œè®ºæ–‡åœ¨ä¸‰ç§ Text2SQL ICL settings ä¸­æ¯”è¾ƒäº†å„ç§ prompt constructions çš„æ•ˆæœï¼Œä¸ºæœªæ¥çš„ç ”ç©¶æä¾›äº†æŒ‡å¯¼ã€‚",-1);function O(V,X){const l=i("ExternalLinkIcon"),o=i("center");return c(),m("div",null,[t("blockquote",null,[t("p",null,[s("è®ºæ–‡ï¼š"),t("a",d,[s("How to Prompt LLMs for Text-to-SQL: A Study in Zero-shot, Single-domain, and Cross-domain Settings"),e(l)])]),h,u,t("p",null,[s("Code: "),t("a",g,[s("GitHub"),e(l)])])]),_,e(o,null,{default:n(()=>[b]),_:1}),x,e(o,null,{default:n(()=>[L]),_:1}),S,T,f,e(o,null,{default:n(()=>[k]),_:1}),Q,C,y,e(o,null,{default:n(()=>[M]),_:1}),q,w,v,I,z,e(o,null,{default:n(()=>[P]),_:1}),N,D,E,R,B,e(o,null,{default:n(()=>[K]),_:1}),j,H,F,G])}const A=r(p,[["render",O],["__file","index.html.vue"]]),J=JSON.parse(`{"path":"/arxiv/2305.11853/","title":"ğŸŒ™ How to prompt LLMs for Text2SQL","lang":"zh-CN","frontmatter":{"title":"ğŸŒ™ How to prompt LLMs for Text2SQL","author":"Bin Yu","createTime":"2024/06/06 16:43:00","permalink":"/arxiv/2305.11853/","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":2,"title":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","slug":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","link":"#ä¸€ã€è®ºæ–‡é€Ÿè¯»","children":[]},{"level":2,"title":"äºŒã€Text2SQL ICL settings","slug":"äºŒã€text2sql-icl-settings","link":"#äºŒã€text2sql-icl-settings","children":[]},{"level":2,"title":"ä¸‰ã€Prompt Construction","slug":"ä¸‰ã€prompt-construction","link":"#ä¸‰ã€prompt-construction","children":[{"level":3,"title":"3.1 Database Prompt","slug":"_3-1-database-prompt","link":"#_3-1-database-prompt","children":[]},{"level":3,"title":"3.2 Demonstration Prompt","slug":"_3-2-demonstration-prompt","link":"#_3-2-demonstration-prompt","children":[]}]},{"level":2,"title":"å››ã€å®éªŒ","slug":"å››ã€å®éªŒ","link":"#å››ã€å®éªŒ","children":[]},{"level":2,"title":"äº”ã€å®éªŒç»“æœ","slug":"äº”ã€å®éªŒç»“æœ","link":"#äº”ã€å®éªŒç»“æœ","children":[{"level":3,"title":"5.1 zero-shot çš„ Text2SQL","slug":"_5-1-zero-shot-çš„-text2sql","link":"#_5-1-zero-shot-çš„-text2sql","children":[]},{"level":3,"title":"5.2 single-domain çš„ Text2SQL","slug":"_5-2-single-domain-çš„-text2sql","link":"#_5-2-single-domain-çš„-text2sql","children":[]},{"level":3,"title":"5.3 cross-domain çš„ Text2SQL","slug":"_5-3-cross-domain-çš„-text2sql","link":"#_5-3-cross-domain-çš„-text2sql","children":[]}]},{"level":2,"title":"å…­ã€æ€»ç»“","slug":"å…­ã€æ€»ç»“","link":"#å…­ã€æ€»ç»“","children":[]}],"readingTime":{"minutes":4.28,"words":1283},"git":{"updatedTime":1717830098000,"contributors":[{"name":"yubinCloud","email":"yubin_SkyWalker@yeah.net","commits":2}]},"filePathRelative":"notes/Text2SQL/2305.How to prompt LLMs for Text2SQL.md","categoryList":[{"type":10000,"name":"notes"},{"type":10004,"name":"Text2SQL"}]}`);export{A as comp,J as data};
