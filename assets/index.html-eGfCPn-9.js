import{_ as r,r as i,o,c,a as s,b as a,d as t,w as n,e as m}from"./app-s5JIphqh.js";const p={},h={href:"http://arxiv.org/abs/1709.00103",target:"_blank",rel:"noopener noreferrer"},g=s("p",null,"⭐⭐⭐⭐⭐",-1),u=s("p",null,"ICLR 2018",-1),d=s("p",null,"Dataset:",-1),x={href:"https://github.com/salesforce/WikiSQL",target:"_blank",rel:"noopener noreferrer"},y={href:"https://huggingface.co/datasets/wikisql",target:"_blank",rel:"noopener noreferrer"},w={href:"https://github.com/tiwarikajal/Seq2SQL--Natural-Language-sentences-to-SQL-Queries/tree/master",target:"_blank",rel:"noopener noreferrer"},v=s("h2",{id:"一、论文速读",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#一、论文速读"},[s("span",null,"一、论文速读")])],-1),_=s("p",null,"本文提出了 Text2SQL 方向的一个经典数据集 —— WikiSQL，同时提出了一个模型 Seq2SQL，用于把自然语言问句转为 SQL。",-1),k=s("p",null,"WikiSQL 数据集中的 SQL 形式较为简单，不包括排序（order by）、分组（group by）、子查询等其他复杂操作。根据这种简单的形式，本文的 Seq2SQL 模型针对一个 table 和一个 question，预测出 SELECT 部分、Aggregation 部分和 WHERE 部分，并将其构造成一个 SQL 语句。下图展示了一个示例：",-1),b=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240518152631.png",alt:"20240518152631",style:{zoom:"75%"}},null,-1),L=s("p",null,"Seq2SQL 基于 Augmented Pointer Network 来实现，下面先介绍一下这个网络结构，然后再介绍基于此来实现 Seq2SQL 模型。",-1),f=s("h2",{id:"二、augmented-pointer-network-增广指针网络",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#二、augmented-pointer-network-增广指针网络"},[s("span",null,"二、Augmented Pointer Network（增广指针网络）")])],-1),z=s("p",null,"Augmented Pointer Network 能够从输入序列中选择 token 并逐个 token 生成输出序列。",-1),M=s("p",null,[a("对于一个 example，输入序列 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"x")]),s("annotation",{encoding:"application/x-tex"},"x")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"x")])])]),a(' 是由"table 的列名"、"SQL 词汇表"、"question"三者用特殊分隔符拼接起来的序列：')],-1),S=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/1716017507764.png",alt:"1716017507764",style:{zoom:"75%"}},null,-1),q=s("p",null,'比如在前面图片的示例中，列名 token 包括 "Pick"、"#"、"CFL" 等等组成，question token 包括 "How"、"many"、"CFL" 等等，SQL 词汇表包括 "SELECT"、"WHERE"、"COUNT"、"MIN" 等等。',-1),Q=s("p",null,[a("这个网络首先对 input sequence "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"x")]),s("annotation",{encoding:"application/x-tex"},"x")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"x")])])]),a(" 做 word embedding，然后输入给两层的 Bi-LSTM 做编码得到 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"h"),s("mrow",null,[s("mi",null,"e"),s("mi",null,"n"),s("mi",null,"c")])])]),s("annotation",{encoding:"application/x-tex"},"h^{enc}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"c")])])])])])])])])])])]),a("，其中 input 的第 i 个 token 的编码是 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msubsup",null,[s("mi",null,"h"),s("mi",null,"t"),s("mrow",null,[s("mi",null,"e"),s("mi",null,"n"),s("mi",null,"c")])])]),s("annotation",{encoding:"application/x-tex"},"h_t^{enc}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9414em","vertical-align":"-0.247em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-2.453em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"t")])]),s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"c")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.247em"}},[s("span")])])])])])])])]),a("，这样每个 token 经过编码都变成了一个 vector。")],-1),N=s("p",null,[a("解码器部分使用双层的单向 LSTM，每一步生成一个 token。具体生成方式是：使用上一步生成的 token "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"y"),s("mrow",null,[s("mi",null,"s"),s("mo",null,"−"),s("mn",null,"1")])])]),s("annotation",{encoding:"application/x-tex"},"y_{s-1}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6389em","vertical-align":"-0.2083em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mbin mtight"},"−"),s("span",{class:"mord mtight"},"1")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2083em"}},[s("span")])])])])])])])]),a(" 作为输入，输出一个 state "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"g"),s("mi",null,"s")])]),s("annotation",{encoding:"application/x-tex"},"g_s")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"s")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("，然后拿 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"g"),s("mi",null,"s")])]),s("annotation",{encoding:"application/x-tex"},"g_s")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"s")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" 与 input sequence 的每个位置 t 的 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"h"),s("mi",null,"t")])]),s("annotation",{encoding:"application/x-tex"},"h_t")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8444em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2806em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"t")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" 做计算得到一个标量的注意力分数 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msubsup",null,[s("mi",null,"α"),s("mrow",null,[s("mi",null,"s"),s("mo",{separator:"true"},","),s("mi",null,"t")]),s("mrow",null,[s("mi",null,"p"),s("mi",null,"t"),s("mi",null,"r")])])]),s("annotation",{encoding:"application/x-tex"},"\\alpha_{s,t}^{ptr}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.2933em","vertical-align":"-0.3819em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.9115em"}},[s("span",{style:{top:"-2.4542em","margin-left":"-0.0037em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"t")])])]),s("span",{style:{top:"-3.1809em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"pt"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3819em"}},[s("span")])])])])])])])]),a("，选择分数最高的对应的输入 token 作为生成的下一个 token。其中注意力分数的计算公式如下：")],-1),E=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240518155338.png",alt:"20240518155338",style:{zoom:"75%"}},null,-1),C=s("h2",{id:"三、seq2sql-模型",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#三、seq2sql-模型"},[s("span",null,"三、Seq2SQL 模型")])],-1),W=s("p",null,"虽然可以直接训练 Augmented Pointer Network 让他生成 SQL 序列作为结果，但是这没有利用 SQL 本身固有的结构。本论文固定 SQL 的结构由三部分组成：SELECT、WHERE 和 Aggregation，并训练三个组件来分别生成这三部分：",-1),T=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240518155640.png",alt:"20240518155640",style:{zoom:"75%"}},null,-1),j=s("h3",{id:"_3-1-aggregation-classifier",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-1-aggregation-classifier"},[s("span",null,"3.1 Aggregation Classifier")])],-1),A=s("p",null,[a("他就是一个 classifier，最终输出一个 softmax 计算后的分布，从 "),s("code",null,"NULL"),a("、"),s("code",null,"MAX"),a("、"),s("code",null,"MIN"),a("、"),s("code",null,"COUNT"),a("、"),s("code",null,"SUM"),a("、"),s("code",null,"AVG"),a(" 中做分类，NULL 表示没有 aggregation 操作。其 loss "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"a"),s("mi",null,"g"),s("mi",null,"g")])])]),s("annotation",{encoding:"application/x-tex"},"L^{agg}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"gg")])])])])])])])])])])]),a(" 使用 cross entropy 来计算。")],-1),H=s("p",null,[a('比如，"How many" 类型的 question 往往被分类为 '),s("code",null,"COUNT"),a("。")],-1),P=s("h3",{id:"_3-2-select-column-prediction",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-2-select-column-prediction"},[s("span",null,"3.2 SELECT column prediction")])],-1),R=s("p",null,"SELECT column prediction 是一个匹配问题，这里使用指针网络的思想来解决：输入列名序列和 question 的拼接，输出与 question 最匹配的一个 column。",-1),B=s("p",null,[a("首先使用 LSTM 对每一列进行编码，column "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"j")]),s("annotation",{encoding:"application/x-tex"},"j")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.854em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05724em"}},"j")])])]),a(" 对应一个 vector "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msubsup",null,[s("mi",null,"e"),s("mi",null,"j"),s("mi",null,"c")])]),s("annotation",{encoding:"application/x-tex"},"e_j^c")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0592em","vertical-align":"-0.3948em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-2.4413em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j")])]),s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"c")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3948em"}},[s("span")])])])])])])])]),a("，然后对 input "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"x")]),s("annotation",{encoding:"application/x-tex"},"x")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"x")])])]),a(" 编码出一个 vector "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"κ"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"l")])])]),s("annotation",{encoding:"application/x-tex"},"\\kappa^{sel}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8491em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"κ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])])])])])])])])]),a("，然后使用 MLP，计算 input representation "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"κ"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"l")])])]),s("annotation",{encoding:"application/x-tex"},"\\kappa^{sel}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8491em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"κ"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])])])])])])])])]),a(" 与每一个 column j 的分数 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msubsup",null,[s("mi",null,"α"),s("mi",null,"j"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"l")])])]),s("annotation",{encoding:"application/x-tex"},"\\alpha^{sel}_{j}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.2439em","vertical-align":"-0.3948em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-2.4413em","margin-left":"-0.0037em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j")])])]),s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3948em"}},[s("span")])])])])])])])]),a("，之后使用 softmax 对分数进行归一化：")],-1),I=s("ul",null,[s("li",null,[a("训练时，使用交叉熵损失 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"l")])])]),s("annotation",{encoding:"application/x-tex"},"L^{sel}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8491em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])])])])])])])])]),a(" 来训练该模块")]),s("li",null,"预测时，选分数最大的 column 作为预测结果")],-1),U=s("blockquote",null,[s("p",null,[a("对于输入 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"x")]),s("annotation",{encoding:"application/x-tex"},"x")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"x")])])]),a(" 编码为 input representation 和计算分数的详细信息可以参考论文和代码实现")])],-1),V=s("h3",{id:"_3-3-where-clause",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-3-where-clause"},[s("span",null,"3.3 WHERE Clause")])],-1),Y=s("p",null,[a("这里使用类似于 Augmented Pointer Network 的 pointer decoder 来训练这一模块。但是使用 cross entropy 有一个限制：两个 WHERE 条件可以被交换并产生相同结果。但两个顺序不同的 WHERE 会被 cross entropy 错误地惩罚，比如 "),s("code",null,"year>18 and male=1"),a(" 和 "),s("code",null,"male=1 and year>18"),a(" 是等价的，但由于 cross entropy 是精确匹配 tokens，导致这个结果会被计算损失。")],-1),K=s("p",null,[a("这里使用强化学习（RL）来训练，"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"q"),s("mo",{stretchy:"false"},"("),s("mi",null,"y"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"q(y)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"q"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),s("span",{class:"mclose"},")")])])]),a(" 是生成的查询，"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"q"),s("mi",null,"g")])]),s("annotation",{encoding:"application/x-tex"},"q_g")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7167em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"q"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),a(" 是真实查询，奖励函数的定义如下：")],-1),O=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240518171120.png",alt:"20240518171120",style:{zoom:"75%"}},null,-1),F=s("p",null,[a("并根据此奖励函数计算出 loss "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"w"),s("mi",null,"h"),s("mi",null,"e")])])]),s("annotation",{encoding:"application/x-tex"},"L^{whe}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8491em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"mord mathnormal mtight"},"h"),s("span",{class:"mord mathnormal mtight"},"e")])])])])])])])])])])]),a("。")],-1),G=s("h3",{id:"_3-4-seq2sql-的训练",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-4-seq2sql-的训练"},[s("span",null,"3.4 Seq2SQL 的训练")])],-1),D=s("p",null,[a("设置一个混合损失函数 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"L"),s("mo",null,"="),s("msup",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"a"),s("mi",null,"g"),s("mi",null,"g")])]),s("mo",null,"+"),s("msup",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"l")])]),s("mo",null,"+"),s("msup",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"w"),s("mi",null,"h"),s("mi",null,"e")])])]),s("annotation",{encoding:"application/x-tex"},"L = L^{agg} + L^{sel} + L^{whe}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7667em","vertical-align":"-0.0833em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"gg")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9324em","vertical-align":"-0.0833em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8491em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8491em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"mord mathnormal mtight"},"h"),s("span",{class:"mord mathnormal mtight"},"e")])])])])])])])])])])]),a("，并使用梯度下降来最小化该 loss 从而训练模型。")],-1),J=m('<h2 id="四、wikisql-数据集" tabindex="-1"><a class="header-anchor" href="#四、wikisql-数据集"><span>四、WikiSQL 数据集</span></a></h2><p>该文更重要的一个贡献是提供了一个 WikiSQL 数据集，包含 80654 条样本和 24241 个 schema，也就是 &quot;80K NL/SQL pairs over 25K table&quot;。这些数据被随机划分为 train、dev 和 test 三个 split。</p><p>如下是一个对 WikiSQL 数据集的特点总结：</p><blockquote><ul><li>Large crowd-sourced dataset for developing NL interfaces for relational databases <ul><li>80K NL/SQL pairs over 25K tables</li></ul></li><li>NL questions on tables gathered from Wikipedia <ul><li>Not entire databases!</li><li>The SQL queries that can be performed are quite simple</li></ul></li><li>⭐ <strong>Contains many mistakes</strong><ul><li>Research suggests that the upper bound has been reached</li><li>Human accuracy estimated at 88%</li></ul></li></ul></blockquote><p>下面是一个 data example：</p>',5),X=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240518173309.png",alt:"20240518173309",style:{zoom:"75%"}},null,-1),Z=m('<p>解释如下：</p><blockquote><ul><li><code>phase</code>: the phase in which the dataset was collected. We collected WikiSQL in two phases.</li><li><code>question</code>: the natural language question written by the worker.</li><li><code>table_id</code>: the ID of the table to which this question is addressed.</li><li><code>sql</code>: the SQL query corresponding to the question. This has the following subfields: <ul><li><code>sel</code>: the numerical index of the column that is being selected. You can find the actual column from the table.</li><li><code>agg</code>: the numerical index of the aggregation operator that is being used. You can find the actual operator from <code>Query.agg_ops</code> in <code>lib/query.py</code>.</li><li><code>conds</code>: a list of triplets <code>(column_index, operator_index, condition)</code> where: <ul><li><code>column_index</code>: the numerical index of the condition column that is being used. You can find the actual column from the table.</li><li><code>operator_index</code>: the numerical index of the condition operator that is being used. You can find the actual operator from <code>Query.cond_ops</code> in <code>lib/query.py</code>.</li><li><code>condition</code>: the comparison value for the condition, in either <code>string</code> or <code>float</code> type.</li></ul></li></ul></li></ul></blockquote><p>同时还给出了每个 table 的 schema 和数据部分。</p><h3 id="_4-1-example" tabindex="-1"><a class="header-anchor" href="#_4-1-example"><span>4.1 Example</span></a></h3>',4),$=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240526212009.png",alt:"20240526212009",style:{zoom:"75%"}},null,-1),ss=s("h3",{id:"_4-2-bad-example",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_4-2-bad-example"},[s("span",null,"4.2 Bad Example")])],-1),as=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240526213054.png",alt:"20240526213054",style:{zoom:"75%"}},null,-1),ts=s("h2",{id:"五、评估指标",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#五、评估指标"},[s("span",null,"五、评估指标")])],-1),ls=s("ul",null,[s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"N")]),s("annotation",{encoding:"application/x-tex"},"N")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])])]),a("：数据集的样本总数")]),s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"N"),s("mrow",null,[s("mi",null,"e"),s("mi",null,"x")])])]),s("annotation",{encoding:"application/x-tex"},"N_{ex}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.109em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"x")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("：运行生成的 SQL 后，得到正确结果的样本数")]),s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"N"),s("mrow",null,[s("mi",null,"l"),s("mi",null,"f")])])]),s("annotation",{encoding:"application/x-tex"},"N_{lf}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.109em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10764em"}},"f")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),a("：生成的 SQL 与 ground-truth SQL 字符串完全精确匹配的样本数")])],-1),ns=s("p",null,"由此提出两个指标：",-1),es=s("ul",null,[s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A"),s("mi",null,"C"),s("msub",null,[s("mi",null,"C"),s("mrow",null,[s("mi",null,"e"),s("mi",null,"x")])]),s("mo",null,"="),s("msub",null,[s("mi",null,"N"),s("mrow",null,[s("mi",null,"e"),s("mi",null,"x")])]),s("mi",{mathvariant:"normal"},"/"),s("mi",null,"N")]),s("annotation",{encoding:"application/x-tex"},"ACC_{ex} = N_{ex} / N")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0715em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"x")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.109em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"x")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord"},"/"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])])]),a("："),s("strong",null,"执行精度指标"),a("，如果生成的 SQL 与 ground-truth SQL 的执行结果相同，那就算作正确。存在一个缺点：如果构造一个错误的 SQL 但执行结果正确，依然被算作正确")]),s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A"),s("mi",null,"C"),s("msub",null,[s("mi",null,"C"),s("mrow",null,[s("mi",null,"l"),s("mi",null,"f")])]),s("mo",null,"="),s("msub",null,[s("mi",null,"N"),s("mrow",null,[s("mi",null,"l"),s("mi",null,"f")])]),s("mi",{mathvariant:"normal"},"/"),s("mi",null,"N")]),s("annotation",{encoding:"application/x-tex"},"ACC_{lf} = N_{lf} / N")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0715em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10764em"}},"f")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0361em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.109em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10764em"}},"f")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mord"},"/"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])])]),a("："),s("strong",null,"逻辑形式的精确指标"),a("，如果生成的 SQL 与 ground-truth SQL 完全匹配，才被算作正确。存在一个缺点：两个等价但写法不同的 SQL 会被算作错误")])],-1),is=s("h2",{id:"六、总结",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#六、总结"},[s("span",null,"六、总结")])],-1),ms=s("p",null,"这篇论文给出了一个 WikiSQL 数据集，并提出了 Text2SQL 的一个解决方案以及评价指标。",-1),rs=s("p",null,"但是很明显，该方案存在不少缺点，之后的方案会继续改进。",-1);function os(cs,ps){const e=i("ExternalLinkIcon"),l=i("center");return o(),c("div",null,[s("blockquote",null,[s("p",null,[a("论文："),s("a",h,[a("Seq2SQL: Generating Structured Queries from Natural Language using Reinforcement Learning"),t(e)])]),g,u,d,s("ul",null,[s("li",null,[s("a",x,[a("WikiSQL | GitHub"),t(e)])]),s("li",null,[s("a",y,[a("WikiSQL | HuggingFace"),t(e)])])]),s("p",null,[a("Code："),s("a",w,[a("Seq2SQL 模型实现"),t(e)])])]),v,_,k,t(l,null,{default:n(()=>[b]),_:1}),L,f,z,M,t(l,null,{default:n(()=>[S]),_:1}),q,Q,N,t(l,null,{default:n(()=>[E]),_:1}),C,W,t(l,null,{default:n(()=>[T]),_:1}),j,A,H,P,R,B,I,U,V,Y,K,t(l,null,{default:n(()=>[O]),_:1}),F,G,D,J,t(l,null,{default:n(()=>[X]),_:1}),Z,t(l,null,{default:n(()=>[$]),_:1}),ss,t(l,null,{default:n(()=>[as]),_:1}),ts,ls,ns,es,is,ms,rs])}const gs=r(p,[["render",os],["__file","index.html.vue"]]),us=JSON.parse(`{"path":"/arxiv/1709.00103/","title":"🐋 WikiSQL 数据集与 Seq2SQL 模型","lang":"zh-CN","frontmatter":{"title":"🐋 WikiSQL 数据集与 Seq2SQL 模型","author":"Bin Yu","createTime":"2024/05/18 14:48:59","permalink":"/arxiv/1709.00103/","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":2,"title":"一、论文速读","slug":"一、论文速读","link":"#一、论文速读","children":[]},{"level":2,"title":"二、Augmented Pointer Network（增广指针网络）","slug":"二、augmented-pointer-network-增广指针网络","link":"#二、augmented-pointer-network-增广指针网络","children":[]},{"level":2,"title":"三、Seq2SQL 模型","slug":"三、seq2sql-模型","link":"#三、seq2sql-模型","children":[{"level":3,"title":"3.1 Aggregation Classifier","slug":"_3-1-aggregation-classifier","link":"#_3-1-aggregation-classifier","children":[]},{"level":3,"title":"3.2 SELECT column prediction","slug":"_3-2-select-column-prediction","link":"#_3-2-select-column-prediction","children":[]},{"level":3,"title":"3.3 WHERE Clause","slug":"_3-3-where-clause","link":"#_3-3-where-clause","children":[]},{"level":3,"title":"3.4 Seq2SQL 的训练","slug":"_3-4-seq2sql-的训练","link":"#_3-4-seq2sql-的训练","children":[]}]},{"level":2,"title":"四、WikiSQL 数据集","slug":"四、wikisql-数据集","link":"#四、wikisql-数据集","children":[{"level":3,"title":"4.1 Example","slug":"_4-1-example","link":"#_4-1-example","children":[]},{"level":3,"title":"4.2 Bad Example","slug":"_4-2-bad-example","link":"#_4-2-bad-example","children":[]}]},{"level":2,"title":"五、评估指标","slug":"五、评估指标","link":"#五、评估指标","children":[]},{"level":2,"title":"六、总结","slug":"六、总结","link":"#六、总结","children":[]}],"readingTime":{"minutes":5.76,"words":1728},"git":{"updatedTime":1716816875000,"contributors":[{"name":"yubinCloud","email":"yubin_SkyWalker@yeah.net","commits":4}]},"filePathRelative":"notes/Text2SQL/1709.WikiSQL 数据集与 Seq2SQL 模型.md","categoryList":[{"type":10000,"name":"notes"},{"type":10004,"name":"Text2SQL"}]}`);export{gs as comp,us as data};
