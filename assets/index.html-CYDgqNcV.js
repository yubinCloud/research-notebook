import{_ as r,r as i,o as c,c as p,a as e,b as t,d as s,w as o,e as a}from"./app-s5JIphqh.js";const h={},m={href:"http://arxiv.org/abs/2403.09732",target:"_blank",rel:"noopener noreferrer"},d=e("p",null,"â­â­â­",-1),u=e("p",null,"arXiv:2403.09732ï¼Œå•†æ±¤ & åŒ—å¤§",-1),L={href:"https://github.com/zhshLii/PETSQL",target:"_blank",rel:"noopener noreferrer"},g=a('<h2 id="ä¸€ã€è®ºæ–‡é€Ÿè¯»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»"><span>ä¸€ã€è®ºæ–‡é€Ÿè¯»</span></a></h2><p>è®ºæ–‡ä¸€å¼€å§‹æå‡ºäº†ä»¥å¾€ prompt-based çš„ Text2SQL æ–¹æ³•çš„ä¸€äº›ç¼ºç‚¹ï¼š</p><ul><li>ç¼ºå°‘å¯¹ table cell value çš„å…ˆéªŒå…³æ³¨ã€‚æ¯”å¦‚æŸ¥è¯¢ sex æ—¶ï¼Œ<code>WHERE sex=&#39;Male&#39;</code>ã€<code>WHERE sex=&#39;M&#39;</code> éƒ½æ˜¯æœ‰å¯èƒ½çš„ï¼ŒLLM ä¹Ÿæ‹¿ä¸å‡†ç”¨å“ªä¸ª</li><li>é€šè¿‡ prompt è®© LLM åš schema linking æ—¶ï¼Œè®© LLM æ ¹æ® question å’Œ schema åˆ—å‡ºç›¸å…³ schema çš„æ•ˆæœå¹¶ä¸å¥½ï¼Œå› ä¸ºåƒå¯¹äº CodeLlama è¿™æ ·çš„æ¨¡å‹æ¥è¯´ï¼ŒåŸºäºæŒ‡ä»¤ç”Ÿæˆéä»£ç æ–‡æœ¬å¹¶ä¸æ˜¯ä»–ä»¬çš„å¼ºé¡¹</li><li>ç›®å‰æ–¹æ³•çš„ post-refinements æ”¶ç›Šä¹Ÿä¸æ˜æ˜¾ï¼š <ul><li>å¦‚æœä¸€ä¸ªç”±å¼ºå¤§çš„ LLM ç”Ÿæˆçš„ SQL å…·æœ‰è¯­ä¹‰æ¨¡ç³Šè€Œä¸æ˜¯è¯­æ³•é”™è¯¯çš„è¯ï¼Œé‚£ LLM æ˜¯æ— æ³• self-debugging çš„</li><li>ä½¿ç”¨ self-consistency æ—¶ï¼ŒLLM çš„æŠ•èµ„å’Œäº§å‡ºæ˜¯ä¸æˆæ¯”ä¾‹ï¼Œå¤šæ¬¡è°ƒç”¨ä¸€ä¸ª LLM äº§ç”Ÿæ•°å€çš„æˆæœ¬ï¼Œå¹¶æ²¡æœ‰ä»æ ¹æœ¬ä¸Šè®© SQL çš„è¾“å‡ºæ›´åŠ å¤šæ ·åŒ–</li></ul></li></ul><p>ç”±æ­¤ï¼Œè®ºæ–‡æå‡ºäº† <mark>Prompt-Enhanced Two-stage text2SQL framework with cross-consistency</mark>ï¼ˆ<strong>PET-SQL</strong>ï¼‰â€”â€” é€šè¿‡ä¸¤ä¸ª stage æ¥å®Œæˆä»»åŠ¡ã€‚</p><h2 id="äºŒã€pet-sql" tabindex="-1"><a class="header-anchor" href="#äºŒã€pet-sql"><span>äºŒã€PET-SQL</span></a></h2><h3 id="_2-1-stage-1-few-shots-prompt-ç”Ÿæˆ-presql" tabindex="-1"><a class="header-anchor" href="#_2-1-stage-1-few-shots-prompt-ç”Ÿæˆ-presql"><span>2.1 Stage 1ï¼šfew-shots prompt ç”Ÿæˆ PreSQL</span></a></h3><p>è¿™ä¸ªé˜¶æ®µæ„é€ å‡ºä¸€ä¸ª few-shots çš„ prompt ç”¨æ¥è¾“å…¥ç»™ LLMã€‚</p><h4 id="_2-1-1-prompt-çš„è¡¨ç¤ºé£æ ¼" tabindex="-1"><a class="header-anchor" href="#_2-1-1-prompt-çš„è¡¨ç¤ºé£æ ¼"><span>2.1.1 prompt çš„è¡¨ç¤ºé£æ ¼</span></a></h4><p>æœ‰å¤šç§æŒ‡å¯¼ LLM ç”Ÿæˆ SQL çš„ prompt è¡¨ç¤ºé£æ ¼ã€‚ä»¥å¾€ç ”ç©¶å‘ç°ï¼ŒCode Representationï¼ˆ<strong>CRp</strong>ï¼‰å’Œ OpenAI Demonstrationï¼ˆ<strong>ODp</strong>ï¼‰è¿™ä¸¤ç§æ˜¯å¾ˆä¸é”™çš„é€‰æ‹©ï¼Œç¤ºä¾‹å¦‚ä¸‹å›¾ï¼š</p>',9),_=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240608142243.png",alt:"20240608142243",style:{zoom:"75%"}},null,-1),S=e("p",null,[t("è®ºæ–‡åŸºäº ODp è¿›ä¸€æ­¥ä¸°å¯Œäº† prompt çš„ä¿¡æ¯ï¼Œæå‡ºäº† Reference-Enchanced representationï¼ˆ"),e("mark",null,"REp"),t("ï¼‰çš„ promptï¼Œæ”¹åŠ¨å¦‚ä¸‹ï¼š")],-1),f=e("ul",null,[e("li",null,[t("åœ¨ instruction æœ€ååŠ äº†ä¸€å¥ "),e("code",null,"You must minimize SQL execution time while ensuring correctness"),t(" æ¥æŒ‡ç¤º LLM ä¸ä»…è¦å…³æ³¨æ‰§è¡Œæ­£ç¡®æ€§ï¼Œè¿˜è¦æ³¨æ„ SQL è¯­å¥çš„æ•ˆç‡ï¼Œé¿å…å†—ä½™çš„å­—ç¬¦å’Œæ“ä½œç¬¦ã€‚")]),e("li",null,"prompt ä¸­å¢åŠ  table cell value ç¤ºä¾‹ï¼Œä¹Ÿå°±æ˜¯éšæœºé€‰æ‹©æ•°æ®åº“è¡¨çš„ 3 rows"),e("li",null,"prompt ä¸­å¢åŠ  schema çš„å¤–é”®å…³ç³»")],-1),k=e("p",null,"æå‡ºçš„ REp ç¤ºä¾‹å¦‚ä¸‹ï¼š",-1),Q=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240608142718.png",alt:"20240608142718",style:{zoom:"75%"}},null,-1),b=e("h4",{id:"_2-1-2-å¢åŠ -few-shots-examples",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-1-2-å¢åŠ -few-shots-examples"},[e("span",null,"2.1.2 å¢åŠ  few-shots examples")])],-1),x=e("p",null,"è¿™é‡Œä» dataset ä¸­æ£€ç´¢å‡ºä¸ user question ç›¸ä¼¼çš„æ ·æœ¬æ¥ä½œä¸º ICL çš„ demonstrationsã€‚",-1),y=e("p",null,[t("æ³¨æ„ï¼Œè¿™é‡Œè¦å¯¹è¢«æ£€ç´¢çš„ NL-SQL pairs åš"),e("strong",null,"å»è¯­ä¹‰åŒ–"),t("ï¼šä¹Ÿå°±æ˜¯æŠŠ question ä¸­ä¸ table schema ç›¸å…³çš„ tokens ç”¨ "),e("code",null,"<mask>"),t(" å»æ‰ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªåªå‘ˆç°é—®é¢˜æ„å›¾çš„ question skeletonã€‚ç„¶åå†å¯¹è¿™äº› question skeleton ä½¿ç”¨ embedding åšè¯­ä¹‰åµŒå…¥ï¼Œä»è€Œç”¨äºæ£€ç´¢ã€‚")],-1),M=e("p",null,"æ£€ç´¢åˆ°çš„ top-K è¢«ç”¨ä½œ demonstrations ç”¨äº few-shots ICLã€‚",-1),w=e("p",null,"è¿™æ ·ï¼Œdemonstrations å’Œå‰é¢çš„ REp prompt ç»“æ„ï¼Œæ„æˆäº†ç”¨äºè¾“å…¥ç»™ LLM çš„ promptï¼š",-1),q=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240608143537.png",alt:"20240608143537",style:{zoom:"75%"}},null,-1),E=e("p",null,[t("ç”±æ­¤ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ª LLM ç”Ÿæˆçš„ preliminary SQLï¼ˆ"),e("strong",null,"PreSQL"),t("ï¼‰ã€‚")],-1),C=e("h3",{id:"_2-2-stage-2-schema-linking-ä¸-finsql-ç”Ÿæˆ",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-2-stage-2-schema-linking-ä¸-finsql-ç”Ÿæˆ"},[e("span",null,"2.2 Stage 2ï¼šSchema Linking ä¸ FinSQL ç”Ÿæˆ")])],-1),T=e("p",null,"è¿™é‡Œçš„å®ç°åŸºäºä¸€ä¸ªç®€å•çš„åŸåˆ™ï¼šPreSQL ä¸ question é«˜åº¦ç›¸å…³ã€‚",-1),v=e("p",null,"å› æ­¤ï¼Œè§£æ PreSQL ä»¥è¯†åˆ«å…¶ä¸­æåˆ°çš„ db tables å’Œ columnsï¼Œå¹¶ç”¨äºæ•°æ®åº“çš„ schema linkingã€‚",-1),P=e("p",null,"ç„¶å schema linking çš„ç»“æœè¢«ç”¨æ¥ç®€åŒ– prompt ä¸­çš„ schema ä¿¡æ¯ï¼Œå»é™¤æ‰æ— å…³çš„ table å’Œ column ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š",-1),R=e("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/20240608144734.png",alt:"20240608144734",style:{zoom:"75%"}},null,-1),z=a('<p>ä½¿ç”¨è¿™ä¸ªç®€åŒ–åçš„ prompt ç”¨æ¥ç”Ÿæˆ FinSQLã€‚</p><h3 id="_2-3-cross-consistency" tabindex="-1"><a class="header-anchor" href="#_2-3-cross-consistency"><span>2.3 Cross Consistency</span></a></h3><p>ä»¥å¾€åš Text2SQL æ—¶å¾€å¾€ä¼šä½¿ç”¨ self-consistency æ¥ä¿®æ­£ SQL ç»“æœï¼Œä½†è¿™æœ‰ä¸€äº›é—®é¢˜ï¼šä½¿ç”¨ self-consistency å¾€å¾€æ˜¯å°† LLM çš„é—®é¢˜è°ƒé«˜ä½¿å…¶ç”Ÿæˆå¤šæ ·åŒ–ï¼Œç„¶åå¤šæ¬¡ç”ŸæˆåæŠ•ç¥¨é€‰å‡ºæœ€ç»ˆç»“æœã€‚ä½†æ˜¯ç ”ç©¶ä¹Ÿå‘ç°ï¼Œé«˜æ¸©ä¸‹çš„ LLM ä¼šå¢åŠ å¹»è§‰ã€é™ä½æ€§èƒ½ï¼Œä¸”å¯¹äºç¡®å®šæ€§ä»»åŠ¡ï¼ˆå¦‚ç”Ÿæˆ SQLï¼‰ï¼Œå•ä¸ª LLM çš„å¤šæ ·æ€§ä¹Ÿä¸è¶³ã€‚</p><p>æ‰€ä»¥æœ¬æ–‡æå‡ºï¼š<strong>åœ¨è¾ƒä½çš„æ¸©åº¦ä¸‹æŒ‡å¯¼å¤šä¸ª LLMs ç”Ÿæˆ SQLï¼Œç„¶ååœ¨è¿™äº› SQL çš„æ‰§è¡Œç»“æœä¹‹é—´æŠ•ç¥¨</strong>ã€‚è¿™ä¹Ÿå°±æ˜¯ <mark>Cross Consistency</mark>ã€‚</p><p>å…³äºæŠ•ç¥¨çš„æ€è·¯ï¼Œè¿™é‡Œæå‡ºäº†ä¸¤ç§ï¼š</p><ul><li><strong>Naive voting</strong>ï¼šè®©æ¯ä¸ª LLMs éƒ½ç”Ÿæˆä¸€ä¸ª SQLï¼Œæ‰§è¡Œåè¿›è¡ŒæŠ•ç¥¨ï¼Œå°†å¤§å¤šæ•°ç»“æœä½œä¸ºæœ€ç»ˆç­”æ¡ˆ</li><li><strong>Fine-grained voting</strong>ï¼šç”±äºä¸åŒçš„ LLM çš„èƒ½åŠ›ä¸åŒï¼Œæ‰€èƒ½å¤„ç†çš„é—®é¢˜çš„å¤æ‚åº¦ä¸åŒï¼Œå› æ­¤ï¼Œæ ¹æ® PreSQL çš„è¯­æ³•è§£æç»“æœå°† question åˆ†ä¸ºå››ä¸ªéš¾åº¦ï¼Œç„¶åä¸åŒçš„éš¾åº¦çš„é—®é¢˜ç”±ä¸åŒçš„å€™é€‰ LLMs æ¥è§£å†³ï¼Œå¹¶è¿›è¡ŒæŠ•ç¥¨ã€‚è¿™æ ·å¯ä»¥æœ€å¤§é™åº¦å‘æŒ¥ LLM çš„æ½œåŠ›ï¼Œå¹¶æ˜¾è‘—å‡è½»æŠ•ç¥¨åè§ã€‚</li></ul><h2 id="ä¸‰ã€å®éªŒ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å®éªŒ"><span>ä¸‰ã€å®éªŒ</span></a></h2><p>åœ¨ Spider æ•°æ®é›†ä¸Šåšäº†æµ‹è¯•ï¼Œä½¿ç”¨ EX ä½œä¸ºè¯„ä¼°ï¼Œä½¿ç”¨çš„ LLM åŒ…æ‹¬ CodeLlamaã€SQLCodeã€IternLMã€SenseChatã€GPT-4 ç­‰ã€‚</p><p>åœ¨ Spider ä¸Šçš„è¡¨ç°ï¼Œåœ¨æ‰€æœ‰éåŸºäºå­¦ä¹ çš„æ–¹æ³•ä¸­å®ç°äº†æœ€é«˜çš„ EXï¼Œæ¯” DAIL-SQL é«˜å‡º 1%ã€‚</p><p>å…·ä½“çš„å®ç°å¯ä»¥å‚è€ƒåŸè®ºæ–‡ã€‚</p><h2 id="å››ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å››ã€æ€»ç»“"><span>å››ã€æ€»ç»“</span></a></h2><p>PET-SQL çš„ä¸¤é˜¶æ®µæ€è·¯è¿˜æ˜¯æŒºå¥½ç†è§£ä¸Šï¼Œprompt è®¾è®¡ä¸Šä¸»è¦å¤šäº† db content æ ·ä¾‹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ question de-semanticization æ¥æå–é—®é¢˜éª¨æ¶è¡¨ç¤ºé—®é¢˜æ„å›¾åœ¨å®ç°ä¸Šåº”è¯¥æ˜¯æ•´ä¸ªæµç¨‹é‡Œæœ€å¤æ‚çš„ã€‚</p>',12);function I(N,F){const l=i("ExternalLinkIcon"),n=i("center");return c(),p("div",null,[e("blockquote",null,[e("p",null,[t("è®ºæ–‡ï¼š"),e("a",m,[t("PET-SQL: A Prompt-enhanced Two-stage Text-to-SQL Framework with Cross-consistency"),s(l)])]),d,u,e("p",null,[t("Codeï¼š"),e("a",L,[t("GitHub"),s(l)])])]),g,s(n,null,{default:o(()=>[_]),_:1}),S,f,k,s(n,null,{default:o(()=>[Q]),_:1}),b,x,y,M,w,s(n,null,{default:o(()=>[q]),_:1}),E,C,T,v,P,s(n,null,{default:o(()=>[R]),_:1}),z])}const B=r(h,[["render",I],["__file","index.html.vue"]]),D=JSON.parse(`{"path":"/arxiv/2403.09732/","title":"ğŸ’¦ PET-SQLï¼šç”¨ Cross-Consistency çš„ prompt å¢å¼ºçš„ä¸¤é˜¶æ®µ Text2SQL æ¡†æ¶","lang":"zh-CN","frontmatter":{"title":"ğŸ’¦ PET-SQLï¼šç”¨ Cross-Consistency çš„ prompt å¢å¼ºçš„ä¸¤é˜¶æ®µ Text2SQL æ¡†æ¶","author":"Bin Yu","createTime":"2024/06/07 21:41:00","permalink":"/arxiv/2403.09732/","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":2,"title":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","slug":"ä¸€ã€è®ºæ–‡é€Ÿè¯»","link":"#ä¸€ã€è®ºæ–‡é€Ÿè¯»","children":[]},{"level":2,"title":"äºŒã€PET-SQL","slug":"äºŒã€pet-sql","link":"#äºŒã€pet-sql","children":[{"level":3,"title":"2.1 Stage 1ï¼šfew-shots prompt ç”Ÿæˆ PreSQL","slug":"_2-1-stage-1-few-shots-prompt-ç”Ÿæˆ-presql","link":"#_2-1-stage-1-few-shots-prompt-ç”Ÿæˆ-presql","children":[]},{"level":3,"title":"2.2 Stage 2ï¼šSchema Linking ä¸ FinSQL ç”Ÿæˆ","slug":"_2-2-stage-2-schema-linking-ä¸-finsql-ç”Ÿæˆ","link":"#_2-2-stage-2-schema-linking-ä¸-finsql-ç”Ÿæˆ","children":[]},{"level":3,"title":"2.3 Cross Consistency","slug":"_2-3-cross-consistency","link":"#_2-3-cross-consistency","children":[]}]},{"level":2,"title":"ä¸‰ã€å®éªŒ","slug":"ä¸‰ã€å®éªŒ","link":"#ä¸‰ã€å®éªŒ","children":[]},{"level":2,"title":"å››ã€æ€»ç»“","slug":"å››ã€æ€»ç»“","link":"#å››ã€æ€»ç»“","children":[]}],"readingTime":{"minutes":4.19,"words":1256},"git":{"updatedTime":1717830098000,"contributors":[{"name":"yubinCloud","email":"yubin_SkyWalker@yeah.net","commits":1}]},"filePathRelative":"notes/Text2SQL/2403.PET-SQL.md","categoryList":[{"type":10000,"name":"notes"},{"type":10004,"name":"Text2SQL"}]}`);export{B as comp,D as data};
