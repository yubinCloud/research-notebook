import{_ as t,r as l,o,c as s,a as e,b as a,d as i,e as n}from"./app-s5JIphqh.js";const d={},u={href:"http://arxiv.org/abs/2312.10997",target:"_blank",rel:"noopener noreferrer"},p=e("p",null,"â­â­â­â­",-1),c=e("p",null,"åŒæµï¼ŒarXiv:2312.10997",-1),m=n('<h2 id="ä¸€ã€rag-çš„ä¸‰ç§ç ”ç©¶èŒƒå¼-naiveã€advancedã€modular" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€rag-çš„ä¸‰ç§ç ”ç©¶èŒƒå¼-naiveã€advancedã€modular"><span>ä¸€ã€RAG çš„ä¸‰ç§ç ”ç©¶èŒƒå¼ï¼šNaiveã€Advancedã€Modular</span></a></h2><p>RAG çš„ç ”ç©¶èŒƒå¼æŒç»­è¿›åŒ–ï¼Œè¿™é‡Œå¯ä»¥å°†å…¶åˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼šNaive RAGã€Advanced RAG å’Œ Modular RAGã€‚ä¸‰ç§èŒƒå¼çš„å¯¹æ¯”å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20240510202418233.png" alt="image-20240510202418233"></p><h3 id="_1-1-naive-rag" tabindex="-1"><a class="header-anchor" href="#_1-1-naive-rag"><span>1.1 Naive RAG</span></a></h3><p>Naive RAG æ˜¯ <em>Retrieve-Read</em> æ¡†æ¶ï¼ŒåŒ…å«äº† indexingã€retrieval å’Œ generation ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p><ul><li>Indexingï¼šå¯¹åŸå§‹çš„ PDFã€HTMLã€Word æˆ–è€… Markdown ç­‰æ ¼å¼çš„æ•°æ®è¿›è¡Œæ¸…æ´—å’ŒæŠ½å–ï¼Œè½¬åŒ–ä¸ºç»Ÿä¸€çš„ plain text æ ¼å¼ï¼Œå¹¶è¿›è€Œå°†å…¶åˆ‡åˆ†ä¸ºæ›´å°çš„ chunksï¼Œä¹‹åï¼Œä½¿ç”¨ embedding model å°†è¿™äº› chunks ç¼–ç ä¸º vector å¹¶å­˜å…¥ vector dbã€‚è¿™ä¸€æ­¥éª¤ä¾¿äºä¹‹åæ£€ç´¢è¿‡ç¨‹æ—¶åš similarity è®¡ç®—ã€‚</li><li>Retrievalï¼šå¯¹ç”¨æˆ·çš„ user query ä½¿ç”¨ encoder æ¨¡å‹å°†å…¶è½¬åŒ–ä¸º vectorï¼Œç„¶åè®¡ç®— query vector å’Œ chunks vector ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œä» corpus ä¸­æ‰¾åˆ°æœ€ç›¸ä¼¼çš„ K ä¸ª chunksï¼Œè¿™äº›æ£€ç´¢å¾—åˆ°çš„ chunks è¢«ç”¨äºæ‰©å±•ä¹‹å prompt çš„ä¸Šä¸‹æ–‡ã€‚</li><li>Generationï¼šå°† prompt template + user query + retrieved docs è¾“å…¥ç»™ LLMï¼Œè®©å…¶å®Œæˆå“åº”ç”Ÿæˆã€‚</li></ul><p>ä½†æ˜¯ Naive RAG å…·æœ‰å‡ ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼š</p><ul><li>retrieval é˜¶æ®µå¯èƒ½ä¼šæ£€ç´¢åˆ°ä¸ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒæ—¶ä¸¢å¤±ä¸€äº›é‡è¦ä¿¡æ¯</li><li>æ£€ç´¢åˆ°çš„ä¸ç›¸å…³çš„ä¿¡æ¯å¾ˆå¯èƒ½ä¼šå½±å“ LLM çš„å›å¤ç”Ÿæˆï¼Œé™ä½ç”Ÿæˆçš„è´¨é‡</li><li>å½“ä»å¤šä¸ª source ä¸­æ£€ç´¢åˆ°ç›¸ä¼¼ä¿¡æ¯æ—¶ï¼Œå¯èƒ½å¯¼è‡´ LLM å‡ºç°é‡å¤å“åº”çš„é—®é¢˜ï¼ˆå³åŒæ ·æ„æ€çš„è¯ä¼šåå¤è¯´å¤šæ¬¡ï¼‰</li><li>å…·æœ‰å¤æ‚æ¨ç†çš„é—®é¢˜ï¼ˆå¦‚ multi-hop é—®é¢˜ï¼‰ï¼Œå¯èƒ½å•æ¬¡æ£€ç´¢ä¸è¶³ä»¥è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li><li>LLM å¯èƒ½ä¼šè¿‡åº¦ä¾èµ–æ£€ç´¢åˆ°çš„ä¿¡æ¯ï¼Œå¯¼è‡´ LLM çš„è¾“å‡ºåªåæ˜ äº†æ£€ç´¢åˆ°çš„å†…å®¹ï¼Œå´æ²¡æœ‰æ·»åŠ æ·±å…¥æ€è€ƒæˆ–è€…åˆæˆçš„ä¿¡æ¯</li></ul><h3 id="_1-2-advanced-rag" tabindex="-1"><a class="header-anchor" href="#_1-2-advanced-rag"><span>1.2 Advanced RAG</span></a></h3>',9),h={href:"https://pub.towardsai.net/advanced-rag-techniques-an-illustrated-overview-04d193d8fec6",target:"_blank",rel:"noopener noreferrer"},g=n('<p>Advanced RAG ä»¥æé«˜æ£€ç´¢è´¨é‡ä¸ºé‡ç‚¹æ¥æ”¹è¿› Naive RAGã€‚åœ¨ Naive RAG çš„åŸºç¡€ä¸Šï¼Œå®ƒå¼•å…¥äº† pre-retrieval å’Œ post-retrieval çš„é˜¶æ®µï¼Œåœ¨è¿™ä¸¤ä¸ªé˜¶æ®µé‡Œï¼Œå¯ä»¥æ–½åŠ ä¸€äº›æ”¹è¿›æ£€ç´¢çš„æŠ€æœ¯ã€‚</p><ul><li><p><strong>Pre-retrieval process</strong>ï¼šåœ¨åšæ£€ç´¢ä¹‹å‰åŠ çš„ä¸€ä¸ªé˜¶æ®µï¼Œä¸»è¦å…³æ³¨çš„æ˜¯<strong>ä¼˜åŒ–ç´¢å¼•å’Œä¼˜åŒ–åŸå§‹æŸ¥è¯¢</strong>ï¼š</p><ul><li><p>ä¼˜åŒ–ç´¢å¼•çš„ç›®æ ‡æ˜¯æé«˜è¢«ç´¢å¼•å†…å®¹çš„è´¨é‡ã€‚å¯ä»¥ä½¿ç”¨çš„ç­–ç•¥åŒ…æ‹¬ï¼šå¢å¼ºæ•°æ®ç²’åº¦ã€ä¼˜åŒ–ç´¢å¼•ç»“æ„ã€æ·»åŠ å…ƒæ•°æ®ã€å¯¹é½ä¼˜åŒ–ã€æ··åˆæ£€ç´¢ç­‰ç­‰</p></li><li><p>ä¼˜åŒ–åŸå§‹æŸ¥è¯¢çš„ç›®æ ‡æ˜¯è®© user query çš„é—®é¢˜æ›´åŠ æ¸…æ™°ï¼Œä½¿ä¹‹æ›´åŠ é€‚åˆæ£€ç´¢ä»»åŠ¡ã€‚å¯ä»¥ä½¿ç”¨çš„ç­–ç•¥æœ‰ï¼šæŸ¥è¯¢é‡å†™ã€æŸ¥è¯¢è½¬æ¢ã€æŸ¥è¯¢æ‰©å±•ç­‰</p></li></ul></li><li><p><strong>Post-retrieval process</strong>ï¼šåœ¨æ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£åï¼Œç›´æ¥å°†æ‰€æœ‰ç›¸å…³æ–‡æ¡£è¾“å…¥ç»™ LLM ä¼šè®©å®ƒä¿¡æ¯è¿‡è½½ï¼Œä¸ç›¸å…³çš„ä¿¡æ¯ä¼šæ·¡åŒ– LLM å¯¹å…³é”®ç»†èŠ‚çš„ç†è§£ï¼Œç”šè‡³ä¼šå¯¹å…¶äº§ç”Ÿè¯¯å¯¼ã€‚å› æ­¤ï¼Œè¿™ä¸€é˜¶æ®µä¸»è¦å¯ä»¥åšçš„å·¥ä½œåŒ…æ‹¬ re-rank å’Œ context compressing:</p><ul><li><p>re-rankï¼šå¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£é‡æ–°æ’åºï¼Œå°†æœ€ç›¸å…³çš„å†…å®¹æ”¾åˆ°å‰é¢</p></li><li><p>context compressingï¼šå‹ç¼©æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œå°½é‡åªä¿ç•™å…³é”®ä¿¡æ¯</p></li></ul></li></ul><h3 id="_1-3-modular-rag" tabindex="-1"><a class="header-anchor" href="#_1-3-modular-rag"><span>1.3 Modular RAG</span></a></h3><p>Modular RAG é€šè¿‡å¼•å…¥å¤šç§ç­–ç•¥ã€å¢åŠ å¤šä¸ªæ¨¡å—æ¥æå‡ RAG çš„å„ä¸ªç›¸å…³ç»„ä»¶ã€‚</p><ul><li>å®ƒå…è®¸æ ¹æ®å…·ä½“çš„é—®é¢˜æ¥è°ƒæ•´æ¨¡å—å’Œæµç¨‹ï¼Œä¾‹å¦‚å¼•å…¥æœç´¢æ¨¡å—ã€è®°å¿†æ¨¡å—ã€é¢å¤–ç”Ÿæˆæ¨¡å—ç­‰æ–°æ¨¡å—ï¼Œä»¥æ‰©å±• RAG çš„åŠŸèƒ½ã€‚</li><li>å…è®¸è°ƒæ•´æ¨¡å—ä¹‹é—´çš„é¡ºåºå’Œè¿æ¥æ–¹å¼ï¼Œå¦‚å¯¹é½æ¨¡å—ã€æ·»åŠ æˆ–æ›¿æ¢æ¨¡å—ç­‰ï¼Œä»¥é€‚åº”ä¸åŒä»»åŠ¡å’Œåœºæ™¯ï¼Œä¸ LLM çš„å…¶ä»–æŠ€æœ¯ï¼ˆå¦‚æç¤ºå·¥ç¨‹ã€çŸ¥è¯†è’¸é¦ç­‰ï¼‰ç›¸ç»“åˆï¼Œæé«˜æ¨¡å‹æ€§èƒ½ï¼Œå¹¶æœ€ç»ˆé€šè¿‡è°ƒæ•´æ¨¡å—å’Œæµç¨‹ï¼Œä½¿ RAG æŠ€æœ¯èƒ½å¤Ÿé€‚åº”å„ç§ä¸‹æ¸¸ä»»åŠ¡ï¼Œæé«˜é€šç”¨æ€§ã€‚</li></ul><p><strong>New Modules</strong> çš„ç›¸å…³å·¥ä½œæœ‰ï¼š</p><ul><li>KnowledGPTï¼šå°†æ£€ç´¢æ•°æ®æºæ‰©å±•åˆ°äº† Knowledge Base</li><li>RAF-Fusionï¼šå¼•å…¥ multi-query ç­–ç•¥ï¼Œæ¥æ‰©å±• user query çš„è§†è§’ï¼Œä»è€Œè¦†ç›–æ›´åŠ å¹¿é˜”çš„æ£€ç´¢é¢</li><li>Selfmemï¼šå¼•å…¥ memory moduleï¼Œmemory åŒ…å«æ£€ç´¢åˆ°çš„æ–‡æ¡£å’Œ LLM è‡ªå·±ä¹‹å‰çš„ç”Ÿæˆï¼Œå¹¶ä½¿ç”¨ memory æ¥å¢å¼º generator</li><li>GenReadï¼šå°† retrieve-then-read æ”¹ä¸º generate-then-read æ¥æå‡æ•ˆæœï¼Œå¹¶æå‡ºè¿›ä¸€æ­¥ä¸¤è€…èåˆçš„æ€è·¯</li><li>UPRISEï¼šä½¿ç”¨ prompt retriever æ¥æ£€ç´¢ prompt ä»è€Œå¢å¼º LLM çš„ zero-shot èƒ½åŠ›</li></ul><p><strong>New Patterns</strong> çš„ç›¸å…³å·¥ä½œæœ‰ï¼š</p><ul><li>Rewrite-Retrieve-Readï¼šåˆ©ç”¨ LLM çš„èƒ½åŠ›å»ä¿®æ­£ user query</li><li>GenReadï¼šä½¿ç”¨ Generate-Read æ›¿æ¢äº† Retrieval-Read</li><li>Recite-Readï¼šé€šè¿‡ prompt è®© LLM å…ˆèƒŒè¯µå†å›ç­”ï¼Œä»è€Œå°†åŸå…ˆçš„çŸ¥è¯†å¯†é›†å‹ä»»åŠ¡åˆ†è§£ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šknowledge-recitation å’Œ task-execution</li><li>HyDEï¼šè®© LLM å…ˆæ ¹æ® user query ç”Ÿæˆä¸€ä¸ªæœæ’°çš„ docï¼Œå†ä½¿ç”¨æœæ’°çš„ doc æ¥é€šè¿‡ embedding ç›¸ä¼¼åº¦æ¥æ£€ç´¢ç›¸å…³çš„ doc</li><li>Self-RAGï¼šå°† retrieval æ”¹è¿›ä¸ºâ€œè‡ªæˆ‘åæ€æ£€ç´¢â€ï¼Œè®© LLM æ¯æ¬¡ç”Ÿæˆä¸€ä¸ªæ–‡æœ¬æ®µï¼Œç”Ÿæˆå‰å…ˆåæ€ä¸€ä¸‹æ˜¯å¦éœ€è¦æ£€ç´¢ï¼Œå¹¶åˆ©ç”¨ç›¸å…³æœºåˆ¶ä»å¤šä¸ªæ£€ç´¢å€™é€‰æ–‡æ¡£ä¸­é€‰å‡ºæœ€åˆé€‚çš„æ–‡æ¡£</li></ul><h3 id="_1-4-rag-vs-fine-tuning" tabindex="-1"><a class="header-anchor" href="#_1-4-rag-vs-fine-tuning"><span>1.4 RAG vs Fine-tuning</span></a></h3><p>ç”¨ä¸€ä¸ªå››è±¡é™å›¾æ¥è¡¨ç¤ºå¦‚ä¸‹ï¼Œä» external knowledge å’Œ model adaption required ä¸¤ä¸ªç»´åº¦æ¥é˜é‡Šï¼š</p><p><img src="https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20240510202714708.png" alt="image-20240510202714708"></p><p>å¯¹äº RAG å’Œ FT çš„é€‰æ‹©ä¾èµ–äºå…·ä½“çš„åœºæ™¯ã€‚å…¶å®ï¼ŒRAG å’Œ FT å¹¶æ²¡äº’ç›¸æ’æ–¥çš„æŠ€æœ¯ï¼Œè€Œæ˜¯è€Œå¯ä»¥ç›¸äº’è¡¥å……å¹¶åœ¨ä¸åŒçš„å±‚æ¬¡ä¸Šæ¥æé«˜ model çš„èƒ½åŠ›ã€‚</p><h2 id="äºŒã€retrieval" tabindex="-1"><a class="header-anchor" href="#äºŒã€retrieval"><span>äºŒã€Retrieval</span></a></h2><p>RAG ä¾èµ– retrieval æ¥ä» data source ä¸­è·å–ç›¸å…³æ–‡æ¡£ã€‚retrieval éœ€è¦è€ƒè™‘çš„é—®é¢˜æœ‰ï¼šæ£€ç´¢æºã€æ£€ç´¢ç²’åº¦ã€æ£€ç´¢çš„é¢„å¤„ç†ã€åµŒå…¥æ¨¡å‹çš„é€‰æ‹©ç­‰ç­‰ã€‚</p><h3 id="_2-1-retrieval-çš„æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-1-retrieval-çš„æ•°æ®ç»“æ„"><span>2.1 Retrieval çš„æ•°æ®ç»“æ„</span></a></h3><ul><li><mark><strong>Unstructured Data</strong></mark>ï¼šæ¯”å¦‚æ–‡æœ¬ã€‚æ–‡æœ¬æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„æ£€ç´¢æºï¼ŒåŒ…æ‹¬ Wikipedia Dumpã€domain-specific æ•°æ®ã€‚å¼€æ”¾åŸŸ QA ä¸»è¦ä½¿ç”¨çš„æ˜¯ Wikipedia Dumpï¼ŒåŒ…æ‹¬ HotpotQAã€DPR ç­‰ã€‚</li><li><mark><strong>Semi-structured Data</strong></mark>ï¼šé€šå¸¸æŒ‡åŒ…å«æ–‡æœ¬å’Œè¡¨æ ¼ä¿¡æ¯çš„ç»„åˆçš„æ•°æ®ï¼Œä¾‹å¦‚ PDFã€‚å¤„ç†åŠç»“æ„åŒ–æ•°æ®å¯¹äº RAG æ¥è¯´æ˜¯å¾ˆæœ‰æŒ‘æˆ˜çš„ï¼Œå› ä¸ºåœ¨èåˆæ–‡æœ¬å’Œè¡¨ç»“æ„å­˜åœ¨å¾ˆå¤šå›°éš¾ï¼Œå¯ä»¥å‚è€ƒç›¸å…³é¢†åŸŸç ”ç©¶ã€‚</li><li><mark><strong>Structured Data</strong></mark>ï¼šæ¯”å¦‚ Knowledge Graphï¼Œè¿™äº›ä¿¡æ¯ç»è¿‡äº†éªŒè¯ï¼Œå¯ä»¥æä¾›æ›´åŠ ç²¾ç¡®çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ KnowledGPT å°±æ˜¯åˆ©ç”¨ KB æ¥å¢å¼º RAG æ¨¡å‹ã€‚å½“ç„¶å¦ä¸€æ–¹é¢ï¼Œè¿™ç§ç»“æ„åŒ–æ•°æ®éœ€è¦é¢å¤–çš„åŠªåŠ›å»æ„å»ºã€éªŒè¯å’Œç»´æŠ¤ç»“æ„åŒ–çš„æ•°æ®åº“ã€‚</li><li><mark><strong>LLMs-Generated Content</strong></mark>ï¼šRAG å¼ºè°ƒå¼•å…¥å¤–éƒ¨è¾…åŠ©çŸ¥è¯†ï¼Œä½†å…¶å®åˆ©ç”¨å¥½ LLM å†…éƒ¨çš„å‚æ•°åŒ–çŸ¥è¯†ä¹Ÿå¾ˆé‡è¦ã€‚åƒ SKR è®ºæ–‡å°±å°†é—®é¢˜åˆ’åˆ†ä¸ºå·²çŸ¥å’ŒæœªçŸ¥ï¼Œå·²çŸ¥é—®é¢˜ç›´æ¥äº¤ç”± LLM ä¾é å†…éƒ¨çŸ¥è¯†æ¥è§£å†³ã€‚åƒ Selfmem è®ºæ–‡å°±æ˜¯ä¹Ÿå°† LLM ç”Ÿæˆçš„ä¿¡æ¯ä½œä¸ºå¢å¼ºä¸Šä¸‹æ–‡ã€‚</li></ul><h3 id="_2-2-retrieval-ç²’åº¦" tabindex="-1"><a class="header-anchor" href="#_2-2-retrieval-ç²’åº¦"><span>2.2 Retrieval ç²’åº¦</span></a></h3><p>æ£€ç´¢ç²’åº¦çš„é€‰æ‹©ä¼šæ˜æ˜¾å½±å“æ¨¡å‹çš„æ•ˆæœï¼Œå› ä¸º LLM ä¼šå—åˆ°æ— å…³ä¸Šä¸‹æ–‡çš„å½±å“å¹¶å› æ­¤å¯¼è‡´ç”Ÿæˆè´¨é‡é™ä½ã€‚</p><ul><li>ç²—ç²’åº¦çš„æ£€ç´¢å•å…ƒå¯ä»¥ä¸º question æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œä½†ä¹Ÿä¼šåŒ…å«è¾ƒå¤šçš„å†—ä½™å†…å®¹ä»è€Œåˆ†æ•£ retriever å’Œ LLM åœ¨ä¸‹æ¸¸ä»»åŠ¡çš„æ³¨æ„åŠ›ã€‚</li><li>ç»†ç²’åº¦çš„æ£€ç´¢å•å…ƒè®©ç›¸å…³ä¿¡æ¯çš„å¯†åº¦æ›´å¤§ï¼Œä½†ä¼šå¢åŠ æ£€ç´¢çš„è´Ÿæ‹…ï¼Œå¹¶ä¸”ä¸èƒ½ä¿è¯è¯­ä¹‰çš„å®Œæ•´æ€§å’Œæ‰€éœ€çŸ¥è¯†çš„æ»¡è¶³ã€‚</li></ul><p>åœ¨æ–‡æœ¬æ•°æ®ä¸­ï¼Œæ£€ç´¢ç²’åº¦ä»ç»†åˆ°ç²—å¯ä»¥å¤§è‡´åˆ†ä¸ºï¼štokenã€phraseã€sentenceã€propositionã€chunkã€documentã€‚</p><p>åœ¨ Knowledge Graph ä¸­ï¼Œæ£€ç´¢ç²’åº¦åŒ…æ‹¬ï¼šentityã€tripletã€sub-graphã€‚</p><blockquote><p>proposition çš„æ£€ç´¢ç²’åº¦å¯ä»¥å‚è€ƒ Dense X å·¥ä½œã€‚</p></blockquote><h3 id="_2-3-ç´¢å¼•ä¼˜åŒ–-indexing-optimization" tabindex="-1"><a class="header-anchor" href="#_2-3-ç´¢å¼•ä¼˜åŒ–-indexing-optimization"><span>2.3 ç´¢å¼•ä¼˜åŒ–ï¼ˆIndexing Optimizationï¼‰</span></a></h3><p>indexing é˜¶æ®µçš„å·¥ä½œåŒ…æ‹¬ï¼šå°† documents é¢„å¤„ç†ã€åˆ†å‰²ï¼Œå¹¶è½¬æ¢ä¸º embedding å­˜å…¥ vector database ä¸­ã€‚</p><p>ç´¢å¼•æ„å»ºçš„è´¨é‡å†³å®šäº†èƒ½å¦åœ¨æ£€ç´¢é˜¶æ®µè·å¾—æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚</p><h4 id="_1-chunk-ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_1-chunk-ç­–ç•¥"><span>1ï¼‰chunk ç­–ç•¥</span></a></h4><p>æœ€å¸¸è§çš„æ–¹æ³•å°±æ˜¯æŒ‰ç…§å›ºå®šæ•°é‡çš„ tokens æ¥å°† document åˆ‡åˆ†ä¸º chunksï¼Œtoken æ•°é‡ä¸€èˆ¬ä¸º 100ã€256ã€512ã€‚å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å­˜åœ¨å¾ˆå¤šä¼˜åŒ–ï¼Œéœ€è¦åœ¨è¯­ä¹‰å®Œæ•´æ€§å’Œæ— å…³ä¿¡æ¯å†—ä½™ä¹‹é—´åšå‡ºå¹³è¡¡ï¼š</p><ul><li>è¾ƒå¤§çš„ chunk ä¼šåŒ…å«è¾ƒå¤šçš„æ— å…³ä¿¡æ¯ï¼Œå½±å“ LLM çš„ç”Ÿæˆè´¨é‡ï¼ŒåŒæ—¶éš¾ä»¥æ£€ç´¢ï¼ˆå› ä¸ºæ— å…³ä¿¡æ¯ä¼šå½±å“åµŒå…¥è¡¨ç¤ºï¼‰</li><li>è¾ƒå°çš„ chunk å…·æœ‰æ›´é«˜å¯†åº¦çš„ç›¸å…³ä¿¡æ¯ï¼Œä½†æ˜¯è¯­ä¹‰å®Œæ•´æ€§è¾ƒå·®ï¼Œéš¾ä»¥è§£å†³å¤šæ¡æ¨ç†ç­‰å¤æ‚é—®é¢˜</li></ul><h4 id="_2-å…ƒæ•°æ®é™„ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-å…ƒæ•°æ®é™„ä»¶"><span>2ï¼‰å…ƒæ•°æ®é™„ä»¶</span></a></h4><p>å¯ä»¥ä½¿ç”¨ metadata æ¥ä¸°å¯Œ chunk çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ filenameã€authorã€category æˆ–è€… timestampï¼Œç„¶åå°±å¯ä»¥åŸºäºå…ƒæ•°æ®æ¥åšè¿‡æ»¤ä»è€Œé™åˆ¶æ£€ç´¢èŒƒå›´ã€‚æ¯”å¦‚æ£€ç´¢è¿‡ç¨‹å¯ä»¥ä¸º document çš„ timestamp åˆ†é…ä¸åŒçš„æƒé‡ä»è€Œå®ç° time-aware çš„ RAGï¼Œä»è€Œç¡®ä¿çŸ¥è¯†çš„æ–°é²œæ€§ã€‚</p><p>è¿˜å¯ä»¥äººå·¥æ„å»ºå…ƒæ•°æ®ï¼Œæ¯”å¦‚æ·»åŠ æ®µè½çš„ summaryï¼Œæˆ–è€…å¼•å…¥å‡è®¾æ€§ questionï¼ˆè¢«ç§°ä¸ºåå‘ HyDEï¼‰ã€‚</p><h4 id="_3-ç»“æ„ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_3-ç»“æ„ç´¢å¼•"><span>3ï¼‰ç»“æ„ç´¢å¼•</span></a></h4><p>å¢å¼ºä¿¡æ¯æ£€ç´¢çš„ä¸€ç§æœ‰æ•ˆæ–¹æ³•å°±æ˜¯ä¸º document å»ºç«‹å±‚æ¬¡ç»“æ„ï¼Œæ¯”å¦‚åˆ†å±‚ç´¢å¼•ç»“æ„ã€çŸ¥è¯†å›¾è°±ç´¢å¼•ç»“æ„ç­‰ã€‚</p><h3 id="_2-4-æŸ¥è¯¢ä¼˜åŒ–-query-optimization" tabindex="-1"><a class="header-anchor" href="#_2-4-æŸ¥è¯¢ä¼˜åŒ–-query-optimization"><span>2.4 æŸ¥è¯¢ä¼˜åŒ–ï¼ˆQuery Optimizationï¼‰</span></a></h3><p>Naive RAG çš„ä¸€ä¸ªæŒ‘æˆ˜æ˜¯ï¼šå®ƒç›´æ¥ä¾èµ–äº user çš„åŸå§‹æŸ¥è¯¢ä½œä¸ºæ£€ç´¢çš„åŸºç¡€ï¼ŒåŸå§‹æŸ¥è¯¢å¯èƒ½ç”±äºæœ¬èº«è¡¨è¾¾å­˜åœ¨é—®é¢˜ã€ä¸çŸ¥è¯†åº“å­˜åœ¨ gap ç­‰åŸå› ï¼Œå¯¼è‡´æ£€ç´¢æ•ˆæœä¸å¥½ã€‚å¦å¤–ï¼ŒLLM åœ¨å¤„ç†å…·æœ‰å¤šç§å«ä¹‰çš„ä¸“ä¸šè¯æ±‡ç¼©å†™æ—¶ä¹Ÿä¼šé‡åˆ°å›°éš¾ã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹ user query è¿›è¡Œä¼˜åŒ–ï¼Œä½¿ä¹‹å˜ä¸ºä¸€ä¸ªæ•ˆæœæ›´å¥½çš„æŸ¥è¯¢æ˜¯ä¸€ä¸ªé‡è¦çš„æ”¹è¿›æ–¹å‘ã€‚</p><h4 id="_1-query-expansion" tabindex="-1"><a class="header-anchor" href="#_1-query-expansion"><span>1ï¼‰Query Expansion</span></a></h4><p>æ€è·¯æ˜¯ä¸ºä¸€ä¸ª single query ä¸°å¯Œå…¶å†…å®¹ï¼Œæä¾›æ›´å¤šçš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œç¡®ä¿ç”Ÿæˆçš„ç­”æ¡ˆçš„æœ€ä½³ç›¸å…³æ€§ã€‚å…·ä½“å®ç°æ–¹æ³•åŒ…æ‹¬ï¼š</p><ul><li><strong>Multi-Query</strong>ï¼šæ¯”å¦‚ <em>RAG-Fusion</em>ï¼Œå°†ä¸€ä¸ª user query æ‰©å±•æˆå¤šä¸ª query å¹¶è¡Œæ‰§è¡Œã€‚</li><li><strong>Sub-Query</strong>ï¼šå°†ä¸€ä¸ª query è§„åˆ’ä¸ºå¤šä¸ª sub-queryï¼Œè¿™äº› sub-query çš„ç»„åˆå¯ä»¥æ›´åŠ ä¸°å¯Œåœ°å›ç­” original questionã€‚æ¯”å¦‚ï¼Œ*<em>least-to-most prompting</em> æ–¹æ³•å°†ä¸€ä¸ª complex question åˆ†è§£ä¸ºå¤šä¸ª simpler sub-questions æ¥è§£å†³ã€‚</li><li><strong>Chain-of-Verification</strong>ï¼šæ‰©å±•åçš„ query ç»è¿‡ LLM éªŒè¯å¯ä»¥è¡¨ç°å‡ºæ›´å¥½çš„å¯é æ€§ã€‚å¯ä»¥å‚è€ƒ <em>Chain-of-Verification</em> è®ºæ–‡ã€‚</li></ul><h4 id="_2-query-transformation" tabindex="-1"><a class="header-anchor" href="#_2-query-transformation"><span>2ï¼‰Query Transformation</span></a></h4><p>æ ¸å¿ƒæ€æƒ³æ˜¯åŸºäºä¸€ä¸ª transformed query è€Œä¸æ˜¯ user original query å»æ£€ç´¢ chunksã€‚å…·ä½“å®ç°æ–¹æ³•åŒ…æ‹¬ï¼š</p><ul><li><strong>Query Rewrite</strong>ï¼šåŸå§‹çš„æŸ¥è¯¢åœ¨ç°å®ä¸–ç•Œä¸­å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªæœ€å¥½çš„æ£€ç´¢ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ prompt LLM çš„æ–¹å¼å» rewrite queriesã€‚ç›¸å…³å·¥ä½œå¯ä»¥å‚è€ƒ EMNLP 2023 çš„ <em>Query Rewriting in Retrieval-Augmented Large Language Models</em>ã€‚</li><li>åŸºäº prompt å·¥ç¨‹è®© LLM ç”ŸæˆåŸºäºåŸå§‹ query æ¥ç”Ÿæˆä¸€ä¸ª queryï¼šæ¯”å¦‚ <em>HyDE</em> è®© LLM å…ˆç”Ÿæˆä¸€ä¸ªæœæ’°æ–‡æ¡£ç”¨äº retrievalï¼›<em>Step-Back Prompting</em> å…ˆé’ˆå¯¹ user query ç”Ÿæˆä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„ query æ¥æ£€ç´¢ç›¸å…³äº‹å®ç”¨äºè¾…åŠ©å›ç­”ã€‚</li></ul><h4 id="_3-query-routing" tabindex="-1"><a class="header-anchor" href="#_3-query-routing"><span>3ï¼‰Query Routing</span></a></h4><p>æ€æƒ³æ˜¯æ ¹æ®ä¸åŒ query è·¯ç”±åˆ°æŸä¸ªç‰¹å®šçš„åˆé€‚çš„ RAG pipeline ä¸­ï¼Œä»è€Œå¯ä»¥æ„å»ºå‡ºèƒ½å¤Ÿé€‚ç”¨äºä¸åŒåœºæ™¯çš„é€šç”¨ RAG ç³»ç»Ÿã€‚</p>',45),v=e("li",null,[e("strong",null,"Metadata Router / Filter"),a("ï¼šå…ˆä» query ä¸­æå–å‡ºå…³é”®å­—æˆ–å®ä½“ï¼Œç„¶åæ ¹æ® chunk ä¸­çš„å…³é”®å­—æˆ– metadata æ¥è¿‡æ»¤ï¼Œä»è€Œç¼©å°æœç´¢èŒƒå›´")],-1),_=e("strong",null,"Semantic Router",-1),R={href:"https://github.com/aurelio-labs/semantic-router",target:"_blank",rel:"noopener noreferrer"},k=e("p",null,"ä¹Ÿå¯ä»¥å°† metadata æ–¹æ³•ä¸ semantic route æ–¹æ³•ç»“åˆï¼Œæ¥å¢å¼º query routingã€‚",-1);function L(y,f){const r=l("ExternalLinkIcon");return o(),s("div",null,[e("blockquote",null,[e("p",null,[a("è®ºæ–‡ï¼š"),e("a",u,[a("Retrieval-Augmented Generation for Large Language Models: A Survey"),i(r)])]),p,c]),m,e("blockquote",null,[e("p",null,[a("å¯å‚è€ƒèµ„æ–™ï¼š"),e("a",h,[a("Advanced RAG Techniques: an Illustrated Overview"),i(r)])])]),g,e("ul",null,[v,e("li",null,[_,a("ï¼šåˆ©ç”¨ query çš„è¯­ä¹‰ä¿¡æ¯æ¥è·¯ç”±ã€‚è¯¦ç»†ä½¿ç”¨å¯ä»¥å‚è€ƒ "),e("a",R,[a("github.com/aurelio-labs/semantic-router"),i(r)])])]),k])}const q=t(d,[["render",L],["__file","index.html.vue"]]),G=JSON.parse(`{"path":"/arxiv/2312.10997/","title":"ğŸ‹ RAG for LLM ç»¼è¿°ï¼ˆ23å¹´12æœˆï¼‰","lang":"zh-CN","frontmatter":{"title":"ğŸ‹ RAG for LLM ç»¼è¿°ï¼ˆ23å¹´12æœˆï¼‰","permalink":"/arxiv/2312.10997/","author":"Bin Yu","createTime":"2024/05/01 12:00:00","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":2,"title":"ä¸€ã€RAG  çš„ä¸‰ç§ç ”ç©¶èŒƒå¼ï¼šNaiveã€Advancedã€Modular","slug":"ä¸€ã€rag-çš„ä¸‰ç§ç ”ç©¶èŒƒå¼-naiveã€advancedã€modular","link":"#ä¸€ã€rag-çš„ä¸‰ç§ç ”ç©¶èŒƒå¼-naiveã€advancedã€modular","children":[{"level":3,"title":"1.1 Naive RAG","slug":"_1-1-naive-rag","link":"#_1-1-naive-rag","children":[]},{"level":3,"title":"1.2 Advanced RAG","slug":"_1-2-advanced-rag","link":"#_1-2-advanced-rag","children":[]},{"level":3,"title":"1.3 Modular RAG","slug":"_1-3-modular-rag","link":"#_1-3-modular-rag","children":[]},{"level":3,"title":"1.4 RAG vs Fine-tuning","slug":"_1-4-rag-vs-fine-tuning","link":"#_1-4-rag-vs-fine-tuning","children":[]}]},{"level":2,"title":"äºŒã€Retrieval","slug":"äºŒã€retrieval","link":"#äºŒã€retrieval","children":[{"level":3,"title":"2.1 Retrieval çš„æ•°æ®ç»“æ„","slug":"_2-1-retrieval-çš„æ•°æ®ç»“æ„","link":"#_2-1-retrieval-çš„æ•°æ®ç»“æ„","children":[]},{"level":3,"title":"2.2 Retrieval ç²’åº¦","slug":"_2-2-retrieval-ç²’åº¦","link":"#_2-2-retrieval-ç²’åº¦","children":[]},{"level":3,"title":"2.3 ç´¢å¼•ä¼˜åŒ–ï¼ˆIndexing Optimizationï¼‰","slug":"_2-3-ç´¢å¼•ä¼˜åŒ–-indexing-optimization","link":"#_2-3-ç´¢å¼•ä¼˜åŒ–-indexing-optimization","children":[]},{"level":3,"title":"2.4 æŸ¥è¯¢ä¼˜åŒ–ï¼ˆQuery Optimizationï¼‰","slug":"_2-4-æŸ¥è¯¢ä¼˜åŒ–-query-optimization","link":"#_2-4-æŸ¥è¯¢ä¼˜åŒ–-query-optimization","children":[]}]}],"readingTime":{"minutes":9.49,"words":2847},"git":{"updatedTime":1715426070000,"contributors":[{"name":"yubinCloud","email":"yubin_SkyWalker@yeah.net","commits":2}]},"filePathRelative":"notes/RAG/2312.RAG ç»¼è¿°.md","categoryList":[{"type":10000,"name":"notes"},{"type":10003,"name":"RAG"}]}`);export{q as comp,G as data};
