<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.9" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.55" /><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();</script><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><title>ğŸ‹ WikiSQL æ•°æ®é›†ä¸ Seq2SQL æ¨¡å‹</title><meta name="description" content=""><link rel="preload" href="/research-notebook/assets/style-Cec0e0LW.css" as="style"><link rel="stylesheet" href="/research-notebook/assets/style-Cec0e0LW.css"><link rel="modulepreload" href="/research-notebook/assets/app-s5JIphqh.js"><link rel="modulepreload" href="/research-notebook/assets/index.html-eGfCPn-9.js"><link rel="prefetch" href="/research-notebook/assets/index.html-B-j-ryWq.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D4spU_9v.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-B0-1BBu1.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-SLLIY8d9.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C65jmr_M.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C-bL2yAS.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C7B5e00U.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Nt9kYeWR.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CE_bMlSy.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CLhUsc3g.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DXgEbOI-.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-v1oOswjF.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CBJ8xjXF.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D4Fq4d_T.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-ByB-z2iB.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Q9nU2u_y.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D8yUAJ7Y.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Dtno56yj.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BDK4L6jX.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Dc5x4woP.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D70LzGEm.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BPemUoR7.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BwgVpDih.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DlaBYZPe.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CgVNpCXw.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-G5FDBLuS.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-uDKSTe9v.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BVMJJZGD.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CrHd4gIE.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BiSS2sK0.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DXcBEjAg.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CQoGuxuN.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CRi0y6sX.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BKNM53Nr.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C0kRXJHb.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-QyJX4BVb.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CJvsDrCW.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BwT074si.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-sp3GJ4_Y.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C3rZacVL.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-B0q2VZS4.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CYDgqNcV.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CDChQk7d.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C9fq1LXw.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-_hma_Fnn.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-7G48gGCA.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BlT-qKyg.js" as="script"><link rel="prefetch" href="/research-notebook/assets/404.html-V2miJEAG.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BcMo9zlU.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CrhXs5dX.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DEOpBtft.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BKeLltu8.js" as="script"><link rel="prefetch" href="/research-notebook/assets/SearchBox-CGeHVkxs.js" as="script"></head><body><div id="app"><!--[--><div class="theme-plume" data-v-ba475dda><!--[--><!--[--><span tabindex="-1" data-v-4bbc90d0></span><a href="#LayoutContent" class="skip-link visually-hidden" data-v-4bbc90d0> Skip to content </a><!--]--><!----><div class="nav-wrapper" data-v-ba475dda data-v-7a402866><div class="navbar-wrapper" data-v-7a402866 data-v-c0f362fa><div class="container" data-v-c0f362fa><div class="title" data-v-c0f362fa><div class="navbar-title" data-v-c0f362fa data-v-b77839f9><a class="auto-link link title" href="/" data-v-b77839f9 data-v-5111f611><!--[--><!----> <!--]--><!----></a></div></div><div class="content" data-v-c0f362fa><div class="curtain" data-v-c0f362fa></div><div class="content-body" data-v-c0f362fa><div class="navbar-search search" data-v-c0f362fa><div class="search-wrapper" data-v-60fa285e><!----><div id="local-search" data-v-60fa285e><button type="button" class="mini-search mini-search-button" aria-label="æœç´¢æ–‡æ¡£" data-v-60fa285e><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">æœç´¢æ–‡æ¡£</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="navbar-menu menu" data-v-c0f362fa data-v-b0c203ca><span id="main-nav-aria-label" class="visually-hidden" data-v-b0c203ca>Main Navigation</span><!--[--><!--[--><a class="auto-link link navbar-menu-link" href="/category/LM/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>LLM</i><!--]--><!----></a><!--]--><!--[--><a class="auto-link link navbar-menu-link" href="/category/LLM-evaluation/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>LLM è¯„ä¼°</i><!--]--><!----></a><!--]--><!--[--><a class="auto-link link navbar-menu-link" href="/category/RAG/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>RAG</i><!--]--><!----></a><!--]--><!--[--><a class="auto-link link navbar-menu-link" href="/category/Text2SQL/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>Text2SQL</i><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="navbar-appearance appearance" data-v-c0f362fa data-v-376ec936><button class="switch-wrapper switch-appearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-376ec936 data-v-b27b6603 data-v-f90faf21><span class="check" data-v-f90faf21><span class="icon" data-v-f90faf21><!--[--><span class="vpi-sun sun" data-v-b27b6603></span><span class="vpi-moon moon" data-v-b27b6603></span><!--]--></span></span></button></div><!----><div class="flyout-wrapper navbar-extra extra" data-v-c0f362fa data-v-7914c0f6 data-v-7e56bc7a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-7e56bc7a><span class="vpi-more-horizontal icon" data-v-7e56bc7a></span></button><div class="menu" data-v-7e56bc7a><div class="menu-wrapper" data-v-7e56bc7a data-v-b4fba565><!----><!--[--><!--[--><!----><div class="group" data-v-7914c0f6><div class="item appearance" data-v-7914c0f6><p class="label" data-v-7914c0f6>å¤–è§‚</p><div class="appearance-action" data-v-7914c0f6><button class="switch-wrapper switch-appearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-7914c0f6 data-v-b27b6603 data-v-f90faf21><span class="check" data-v-f90faf21><span class="icon" data-v-f90faf21><!--[--><span class="vpi-sun sun" data-v-b27b6603></span><span class="vpi-moon moon" data-v-b27b6603></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-c0f362fa data-v-7e5802de><span class="container" data-v-7e5802de><span class="top" data-v-7e5802de></span><span class="middle" data-v-7e5802de></span><span class="bottom" data-v-7e5802de></span></span></button></div></div></div></div><!----></div><!----><!----><div id="LayoutContent" class="layout-content" data-v-ba475dda data-v-094016f3><!--[--><div class="has-aside plume-page" data-v-5b0e3d8f><div class="container" data-v-5b0e3d8f><div class="aside" data-v-5b0e3d8f><div class="aside-container" data-v-5b0e3d8f><div class="aside-content" data-v-5b0e3d8f><div class="page-aside" data-v-5b0e3d8f data-v-f8c78049><div class="has-outline page-aside-outline" data-v-f8c78049><div class="content" data-v-f8c78049><div class="outline-marker" data-v-f8c78049></div><div class="outline-title" data-v-f8c78049><span data-v-f8c78049>æ­¤é¡µå†…å®¹</span><span class="vpi-print icon" data-v-f8c78049></span></div><nav aria-labelledby="doc-outline-aria-label" data-v-f8c78049><span id="doc-outline-aria-label" class="visually-hidden" data-v-f8c78049> Table of Contents for current page </span><ul class="root" data-v-f8c78049 data-v-9a83b7a1><!--[--><li data-v-9a83b7a1><a class="outline-link" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»" data-v-9a83b7a1>ä¸€ã€è®ºæ–‡é€Ÿè¯»</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#äºŒã€augmented-pointer-network-å¢å¹¿æŒ‡é’ˆç½‘ç»œ" data-v-9a83b7a1>äºŒã€Augmented Pointer Networkï¼ˆå¢å¹¿æŒ‡é’ˆç½‘ç»œï¼‰</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#ä¸‰ã€seq2sql-æ¨¡å‹" data-v-9a83b7a1>ä¸‰ã€Seq2SQL æ¨¡å‹</a><ul class="nested" data-v-9a83b7a1 data-v-9a83b7a1><!--[--><li data-v-9a83b7a1><a class="outline-link" href="#_3-1-aggregation-classifier" data-v-9a83b7a1>3.1 Aggregation Classifier</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#_3-2-select-column-prediction" data-v-9a83b7a1>3.2 SELECT column prediction</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#_3-3-where-clause" data-v-9a83b7a1>3.3 WHERE Clause</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#_3-4-seq2sql-çš„è®­ç»ƒ" data-v-9a83b7a1>3.4 Seq2SQL çš„è®­ç»ƒ</a><!----></li><!--]--></ul></li><li data-v-9a83b7a1><a class="outline-link" href="#å››ã€wikisql-æ•°æ®é›†" data-v-9a83b7a1>å››ã€WikiSQL æ•°æ®é›†</a><ul class="nested" data-v-9a83b7a1 data-v-9a83b7a1><!--[--><li data-v-9a83b7a1><a class="outline-link" href="#_4-1-example" data-v-9a83b7a1>4.1 Example</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#_4-2-bad-example" data-v-9a83b7a1>4.2 Bad Example</a><!----></li><!--]--></ul></li><li data-v-9a83b7a1><a class="outline-link" href="#äº”ã€è¯„ä¼°æŒ‡æ ‡" data-v-9a83b7a1>äº”ã€è¯„ä¼°æŒ‡æ ‡</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#å…­ã€æ€»ç»“" data-v-9a83b7a1>å…­ã€æ€»ç»“</a><!----></li><!--]--></ul></nav></div></div></div></div></div></div><div class="content" data-v-5b0e3d8f><div class="content-container" data-v-5b0e3d8f><!--[--><!----><h1 class="page-title" data-v-dbc950ba>ğŸ‹ WikiSQL æ•°æ®é›†ä¸ Seq2SQL æ¨¡å‹</h1><div class="page-meta-wrapper" data-v-dbc950ba><p class="author" data-v-dbc950ba><span class="icon vpi-user" data-v-dbc950ba></span><span data-v-dbc950ba>Bin Yu</span></p><p class="reading-time" data-v-dbc950ba><span class="vpi-books icon" data-v-dbc950ba></span><span data-v-dbc950ba>1728å­—</span><span data-v-dbc950ba>çº¦6åˆ†é’Ÿ</span></p><!----><p class="create-time" data-v-dbc950ba><span class="vpi-clock icon" data-v-dbc950ba></span><span data-v-dbc950ba>2024-05-18</span></p></div><!--]--><!--[--><div style="position:relative;" data-v-5b0e3d8f><div class="plume-content" data-v-5b0e3d8f><blockquote><p>è®ºæ–‡ï¼š<a href="http://arxiv.org/abs/1709.00103" target="_blank" rel="noopener noreferrer">Seq2SQL: Generating Structured Queries from Natural Language using Reinforcement Learning<span class="vpi-external-link external-icon" data-v-9f412e4e></span></a></p><p>â­â­â­â­â­</p><p>ICLR 2018</p><p>Dataset:</p><ul><li><a href="https://github.com/salesforce/WikiSQL" target="_blank" rel="noopener noreferrer">WikiSQL | GitHub<span class="vpi-external-link external-icon" data-v-9f412e4e></span></a></li><li><a href="https://huggingface.co/datasets/wikisql" target="_blank" rel="noopener noreferrer">WikiSQL | HuggingFace<span class="vpi-external-link external-icon" data-v-9f412e4e></span></a></li></ul><p>Codeï¼š<a href="https://github.com/tiwarikajal/Seq2SQL--Natural-Language-sentences-to-SQL-Queries/tree/master" target="_blank" rel="noopener noreferrer">Seq2SQL æ¨¡å‹å®ç°<span class="vpi-external-link external-icon" data-v-9f412e4e></span></a></p></blockquote><h2 id="ä¸€ã€è®ºæ–‡é€Ÿè¯»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»"><span>ä¸€ã€è®ºæ–‡é€Ÿè¯»</span></a></h2><p>æœ¬æ–‡æå‡ºäº† Text2SQL æ–¹å‘çš„ä¸€ä¸ªç»å…¸æ•°æ®é›† â€”â€” WikiSQLï¼ŒåŒæ—¶æå‡ºäº†ä¸€ä¸ªæ¨¡å‹ Seq2SQLï¼Œç”¨äºæŠŠè‡ªç„¶è¯­è¨€é—®å¥è½¬ä¸º SQLã€‚</p><p>WikiSQL æ•°æ®é›†ä¸­çš„ SQL å½¢å¼è¾ƒä¸ºç®€å•ï¼Œä¸åŒ…æ‹¬æ’åºï¼ˆorder byï¼‰ã€åˆ†ç»„ï¼ˆgroup byï¼‰ã€å­æŸ¥è¯¢ç­‰å…¶ä»–å¤æ‚æ“ä½œã€‚æ ¹æ®è¿™ç§ç®€å•çš„å½¢å¼ï¼Œæœ¬æ–‡çš„ Seq2SQL æ¨¡å‹é’ˆå¯¹ä¸€ä¸ª table å’Œä¸€ä¸ª questionï¼Œé¢„æµ‹å‡º SELECT éƒ¨åˆ†ã€Aggregation éƒ¨åˆ†å’Œ WHERE éƒ¨åˆ†ï¼Œå¹¶å°†å…¶æ„é€ æˆä¸€ä¸ª SQL è¯­å¥ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªç¤ºä¾‹ï¼š</p><!----><p>Seq2SQL åŸºäº Augmented Pointer Network æ¥å®ç°ï¼Œä¸‹é¢å…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸ªç½‘ç»œç»“æ„ï¼Œç„¶åå†ä»‹ç»åŸºäºæ­¤æ¥å®ç° Seq2SQL æ¨¡å‹ã€‚</p><h2 id="äºŒã€augmented-pointer-network-å¢å¹¿æŒ‡é’ˆç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#äºŒã€augmented-pointer-network-å¢å¹¿æŒ‡é’ˆç½‘ç»œ"><span>äºŒã€Augmented Pointer Networkï¼ˆå¢å¹¿æŒ‡é’ˆç½‘ç»œï¼‰</span></a></h2><p>Augmented Pointer Network èƒ½å¤Ÿä»è¾“å…¥åºåˆ—ä¸­é€‰æ‹© token å¹¶é€ä¸ª token ç”Ÿæˆè¾“å‡ºåºåˆ—ã€‚</p><p>å¯¹äºä¸€ä¸ª exampleï¼Œè¾“å…¥åºåˆ— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ç”±&quot;table çš„åˆ—å&quot;ã€&quot;SQL è¯æ±‡è¡¨&quot;ã€&quot;question&quot;ä¸‰è€…ç”¨ç‰¹æ®Šåˆ†éš”ç¬¦æ‹¼æ¥èµ·æ¥çš„åºåˆ—ï¼š</p><!----><p>æ¯”å¦‚åœ¨å‰é¢å›¾ç‰‡çš„ç¤ºä¾‹ä¸­ï¼Œåˆ—å token åŒ…æ‹¬ &quot;Pick&quot;ã€&quot;#&quot;ã€&quot;CFL&quot; ç­‰ç­‰ç»„æˆï¼Œquestion token åŒ…æ‹¬ &quot;How&quot;ã€&quot;many&quot;ã€&quot;CFL&quot; ç­‰ç­‰ï¼ŒSQL è¯æ±‡è¡¨åŒ…æ‹¬ &quot;SELECT&quot;ã€&quot;WHERE&quot;ã€&quot;COUNT&quot;ã€&quot;MIN&quot; ç­‰ç­‰ã€‚</p><p>è¿™ä¸ªç½‘ç»œé¦–å…ˆå¯¹ input sequence <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åš word embeddingï¼Œç„¶åè¾“å…¥ç»™ä¸¤å±‚çš„ Bi-LSTM åšç¼–ç å¾—åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>h</mi><mrow><mi>e</mi><mi>n</mi><mi>c</mi></mrow></msup></mrow><annotation encoding="application/x-tex">h^{enc}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­ input çš„ç¬¬ i ä¸ª token çš„ç¼–ç æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>h</mi><mi>t</mi><mrow><mi>e</mi><mi>n</mi><mi>c</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">h_t^{enc}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9414em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¿™æ ·æ¯ä¸ª token ç»è¿‡ç¼–ç éƒ½å˜æˆäº†ä¸€ä¸ª vectorã€‚</p><p>è§£ç å™¨éƒ¨åˆ†ä½¿ç”¨åŒå±‚çš„å•å‘ LSTMï¼Œæ¯ä¸€æ­¥ç”Ÿæˆä¸€ä¸ª tokenã€‚å…·ä½“ç”Ÿæˆæ–¹å¼æ˜¯ï¼šä½¿ç”¨ä¸Šä¸€æ­¥ç”Ÿæˆçš„ token <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mrow><mi>s</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">y_{s-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span> ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ª state <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">g_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œç„¶åæ‹¿ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">g_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸ input sequence çš„æ¯ä¸ªä½ç½® t çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">h_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> åšè®¡ç®—å¾—åˆ°ä¸€ä¸ªæ ‡é‡çš„æ³¨æ„åŠ›åˆ†æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Î±</mi><mrow><mi>s</mi><mo separator="true">,</mo><mi>t</mi></mrow><mrow><mi>p</mi><mi>t</mi><mi>r</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\alpha_{s,t}^{ptr}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2933em;vertical-align:-0.3819em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9115em;"><span style="top:-2.4542em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3819em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œé€‰æ‹©åˆ†æ•°æœ€é«˜çš„å¯¹åº”çš„è¾“å…¥ token ä½œä¸ºç”Ÿæˆçš„ä¸‹ä¸€ä¸ª tokenã€‚å…¶ä¸­æ³¨æ„åŠ›åˆ†æ•°çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><!----><h2 id="ä¸‰ã€seq2sql-æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€seq2sql-æ¨¡å‹"><span>ä¸‰ã€Seq2SQL æ¨¡å‹</span></a></h2><p>è™½ç„¶å¯ä»¥ç›´æ¥è®­ç»ƒ Augmented Pointer Network è®©ä»–ç”Ÿæˆ SQL åºåˆ—ä½œä¸ºç»“æœï¼Œä½†æ˜¯è¿™æ²¡æœ‰åˆ©ç”¨ SQL æœ¬èº«å›ºæœ‰çš„ç»“æ„ã€‚æœ¬è®ºæ–‡å›ºå®š SQL çš„ç»“æ„ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šSELECTã€WHERE å’Œ Aggregationï¼Œå¹¶è®­ç»ƒä¸‰ä¸ªç»„ä»¶æ¥åˆ†åˆ«ç”Ÿæˆè¿™ä¸‰éƒ¨åˆ†ï¼š</p><!----><h3 id="_3-1-aggregation-classifier" tabindex="-1"><a class="header-anchor" href="#_3-1-aggregation-classifier"><span>3.1 Aggregation Classifier</span></a></h3><p>ä»–å°±æ˜¯ä¸€ä¸ª classifierï¼Œæœ€ç»ˆè¾“å‡ºä¸€ä¸ª softmax è®¡ç®—åçš„åˆ†å¸ƒï¼Œä» <code>NULL</code>ã€<code>MAX</code>ã€<code>MIN</code>ã€<code>COUNT</code>ã€<code>SUM</code>ã€<code>AVG</code> ä¸­åšåˆ†ç±»ï¼ŒNULL è¡¨ç¤ºæ²¡æœ‰ aggregation æ“ä½œã€‚å…¶ loss <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mrow><mi>a</mi><mi>g</mi><mi>g</mi></mrow></msup></mrow><annotation encoding="application/x-tex">L^{agg}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">gg</span></span></span></span></span></span></span></span></span></span></span></span> ä½¿ç”¨ cross entropy æ¥è®¡ç®—ã€‚</p><p>æ¯”å¦‚ï¼Œ&quot;How many&quot; ç±»å‹çš„ question å¾€å¾€è¢«åˆ†ç±»ä¸º <code>COUNT</code>ã€‚</p><h3 id="_3-2-select-column-prediction" tabindex="-1"><a class="header-anchor" href="#_3-2-select-column-prediction"><span>3.2 SELECT column prediction</span></a></h3><p>SELECT column prediction æ˜¯ä¸€ä¸ªåŒ¹é…é—®é¢˜ï¼Œè¿™é‡Œä½¿ç”¨æŒ‡é’ˆç½‘ç»œçš„æ€æƒ³æ¥è§£å†³ï¼šè¾“å…¥åˆ—ååºåˆ—å’Œ question çš„æ‹¼æ¥ï¼Œè¾“å‡ºä¸ question æœ€åŒ¹é…çš„ä¸€ä¸ª columnã€‚</p><p>é¦–å…ˆä½¿ç”¨ LSTM å¯¹æ¯ä¸€åˆ—è¿›è¡Œç¼–ç ï¼Œcolumn <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> å¯¹åº”ä¸€ä¸ª vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>e</mi><mi>j</mi><mi>c</mi></msubsup></mrow><annotation encoding="application/x-tex">e_j^c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0592em;vertical-align:-0.3948em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-2.4413em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3948em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œç„¶åå¯¹ input <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ç¼–ç å‡ºä¸€ä¸ª vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Îº</mi><mrow><mi>s</mi><mi>e</mi><mi>l</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\kappa^{sel}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">Îº</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œç„¶åä½¿ç”¨ MLPï¼Œè®¡ç®— input representation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Îº</mi><mrow><mi>s</mi><mi>e</mi><mi>l</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\kappa^{sel}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">Îº</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span></span></span></span> ä¸æ¯ä¸€ä¸ª column j çš„åˆ†æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>Î±</mi><mi>j</mi><mrow><mi>s</mi><mi>e</mi><mi>l</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\alpha^{sel}_{j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2439em;vertical-align:-0.3948em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-2.4413em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3948em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¹‹åä½¿ç”¨ softmax å¯¹åˆ†æ•°è¿›è¡Œå½’ä¸€åŒ–ï¼š</p><ul><li>è®­ç»ƒæ—¶ï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mrow><mi>s</mi><mi>e</mi><mi>l</mi></mrow></msup></mrow><annotation encoding="application/x-tex">L^{sel}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span></span></span></span> æ¥è®­ç»ƒè¯¥æ¨¡å—</li><li>é¢„æµ‹æ—¶ï¼Œé€‰åˆ†æ•°æœ€å¤§çš„ column ä½œä¸ºé¢„æµ‹ç»“æœ</li></ul><blockquote><p>å¯¹äºè¾“å…¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ç¼–ç ä¸º input representation å’Œè®¡ç®—åˆ†æ•°çš„è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒè®ºæ–‡å’Œä»£ç å®ç°</p></blockquote><h3 id="_3-3-where-clause" tabindex="-1"><a class="header-anchor" href="#_3-3-where-clause"><span>3.3 WHERE Clause</span></a></h3><p>è¿™é‡Œä½¿ç”¨ç±»ä¼¼äº Augmented Pointer Network çš„ pointer decoder æ¥è®­ç»ƒè¿™ä¸€æ¨¡å—ã€‚ä½†æ˜¯ä½¿ç”¨ cross entropy æœ‰ä¸€ä¸ªé™åˆ¶ï¼šä¸¤ä¸ª WHERE æ¡ä»¶å¯ä»¥è¢«äº¤æ¢å¹¶äº§ç”Ÿç›¸åŒç»“æœã€‚ä½†ä¸¤ä¸ªé¡ºåºä¸åŒçš„ WHERE ä¼šè¢« cross entropy é”™è¯¯åœ°æƒ©ç½šï¼Œæ¯”å¦‚ <code>year&gt;18 and male=1</code> å’Œ <code>male=1 and year&gt;18</code> æ˜¯ç­‰ä»·çš„ï¼Œä½†ç”±äº cross entropy æ˜¯ç²¾ç¡®åŒ¹é… tokensï¼Œå¯¼è‡´è¿™ä¸ªç»“æœä¼šè¢«è®¡ç®—æŸå¤±ã€‚</p><p>è¿™é‡Œä½¿ç”¨å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰æ¥è®­ç»ƒï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">q(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> æ˜¯ç”Ÿæˆçš„æŸ¥è¯¢ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">q_g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯çœŸå®æŸ¥è¯¢ï¼Œå¥–åŠ±å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><!----><p>å¹¶æ ¹æ®æ­¤å¥–åŠ±å‡½æ•°è®¡ç®—å‡º loss <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mrow><mi>w</mi><mi>h</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">L^{whe}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span></span></span></span></span></span></span></span></span></span></span></span>ã€‚</p><h3 id="_3-4-seq2sql-çš„è®­ç»ƒ" tabindex="-1"><a class="header-anchor" href="#_3-4-seq2sql-çš„è®­ç»ƒ"><span>3.4 Seq2SQL çš„è®­ç»ƒ</span></a></h3><p>è®¾ç½®ä¸€ä¸ªæ··åˆæŸå¤±å‡½æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><msup><mi>L</mi><mrow><mi>a</mi><mi>g</mi><mi>g</mi></mrow></msup><mo>+</mo><msup><mi>L</mi><mrow><mi>s</mi><mi>e</mi><mi>l</mi></mrow></msup><mo>+</mo><msup><mi>L</mi><mrow><mi>w</mi><mi>h</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">L = L^{agg} + L^{sel} + L^{whe}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">gg</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå¹¶ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ¥æœ€å°åŒ–è¯¥ loss ä»è€Œè®­ç»ƒæ¨¡å‹ã€‚</p><h2 id="å››ã€wikisql-æ•°æ®é›†" tabindex="-1"><a class="header-anchor" href="#å››ã€wikisql-æ•°æ®é›†"><span>å››ã€WikiSQL æ•°æ®é›†</span></a></h2><p>è¯¥æ–‡æ›´é‡è¦çš„ä¸€ä¸ªè´¡çŒ®æ˜¯æä¾›äº†ä¸€ä¸ª WikiSQL æ•°æ®é›†ï¼ŒåŒ…å« 80654 æ¡æ ·æœ¬å’Œ 24241 ä¸ª schemaï¼Œä¹Ÿå°±æ˜¯ &quot;80K NL/SQL pairs over 25K table&quot;ã€‚è¿™äº›æ•°æ®è¢«éšæœºåˆ’åˆ†ä¸º trainã€dev å’Œ test ä¸‰ä¸ª splitã€‚</p><p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªå¯¹ WikiSQL æ•°æ®é›†çš„ç‰¹ç‚¹æ€»ç»“ï¼š</p><blockquote><ul><li>Large crowd-sourced dataset for developing NL interfaces for relational databases <ul><li>80K NL/SQL pairs over 25K tables</li></ul></li><li>NL questions on tables gathered from Wikipedia <ul><li>Not entire databases!</li><li>The SQL queries that can be performed are quite simple</li></ul></li><li>â­ <strong>Contains many mistakes</strong><ul><li>Research suggests that the upper bound has been reached</li><li>Human accuracy estimated at 88%</li></ul></li></ul></blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ª data exampleï¼š</p><!----><p>è§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote><ul><li><code>phase</code>: the phase in which the dataset was collected. We collected WikiSQL in two phases.</li><li><code>question</code>: the natural language question written by the worker.</li><li><code>table_id</code>: the ID of the table to which this question is addressed.</li><li><code>sql</code>: the SQL query corresponding to the question. This has the following subfields: <ul><li><code>sel</code>: the numerical index of the column that is being selected. You can find the actual column from the table.</li><li><code>agg</code>: the numerical index of the aggregation operator that is being used. You can find the actual operator from <code>Query.agg_ops</code> in <code>lib/query.py</code>.</li><li><code>conds</code>: a list of triplets <code>(column_index, operator_index, condition)</code> where: <ul><li><code>column_index</code>: the numerical index of the condition column that is being used. You can find the actual column from the table.</li><li><code>operator_index</code>: the numerical index of the condition operator that is being used. You can find the actual operator from <code>Query.cond_ops</code> in <code>lib/query.py</code>.</li><li><code>condition</code>: the comparison value for the condition, in either <code>string</code> or <code>float</code> type.</li></ul></li></ul></li></ul></blockquote><p>åŒæ—¶è¿˜ç»™å‡ºäº†æ¯ä¸ª table çš„ schema å’Œæ•°æ®éƒ¨åˆ†ã€‚</p><h3 id="_4-1-example" tabindex="-1"><a class="header-anchor" href="#_4-1-example"><span>4.1 Example</span></a></h3><!----><h3 id="_4-2-bad-example" tabindex="-1"><a class="header-anchor" href="#_4-2-bad-example"><span>4.2 Bad Example</span></a></h3><!----><h2 id="äº”ã€è¯„ä¼°æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#äº”ã€è¯„ä¼°æŒ‡æ ‡"><span>äº”ã€è¯„ä¼°æŒ‡æ ‡</span></a></h2><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>ï¼šæ•°æ®é›†çš„æ ·æœ¬æ€»æ•°</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mrow><mi>e</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">N_{ex}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼šè¿è¡Œç”Ÿæˆçš„ SQL åï¼Œå¾—åˆ°æ­£ç¡®ç»“æœçš„æ ·æœ¬æ•°</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mrow><mi>l</mi><mi>f</mi></mrow></msub></mrow><annotation encoding="application/x-tex">N_{lf}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>ï¼šç”Ÿæˆçš„ SQL ä¸ ground-truth SQL å­—ç¬¦ä¸²å®Œå…¨ç²¾ç¡®åŒ¹é…çš„æ ·æœ¬æ•°</li></ul><p>ç”±æ­¤æå‡ºä¸¤ä¸ªæŒ‡æ ‡ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>C</mi><msub><mi>C</mi><mrow><mi>e</mi><mi>x</mi></mrow></msub><mo>=</mo><msub><mi>N</mi><mrow><mi>e</mi><mi>x</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">ACC_{ex} = N_{ex} / N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>ï¼š<strong>æ‰§è¡Œç²¾åº¦æŒ‡æ ‡</strong>ï¼Œå¦‚æœç”Ÿæˆçš„ SQL ä¸ ground-truth SQL çš„æ‰§è¡Œç»“æœç›¸åŒï¼Œé‚£å°±ç®—ä½œæ­£ç¡®ã€‚å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ï¼šå¦‚æœæ„é€ ä¸€ä¸ªé”™è¯¯çš„ SQL ä½†æ‰§è¡Œç»“æœæ­£ç¡®ï¼Œä¾ç„¶è¢«ç®—ä½œæ­£ç¡®</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>C</mi><msub><mi>C</mi><mrow><mi>l</mi><mi>f</mi></mrow></msub><mo>=</mo><msub><mi>N</mi><mrow><mi>l</mi><mi>f</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">ACC_{lf} = N_{lf} / N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>ï¼š<strong>é€»è¾‘å½¢å¼çš„ç²¾ç¡®æŒ‡æ ‡</strong>ï¼Œå¦‚æœç”Ÿæˆçš„ SQL ä¸ ground-truth SQL å®Œå…¨åŒ¹é…ï¼Œæ‰è¢«ç®—ä½œæ­£ç¡®ã€‚å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ï¼šä¸¤ä¸ªç­‰ä»·ä½†å†™æ³•ä¸åŒçš„ SQL ä¼šè¢«ç®—ä½œé”™è¯¯</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“"><span>å…­ã€æ€»ç»“</span></a></h2><p>è¿™ç¯‡è®ºæ–‡ç»™å‡ºäº†ä¸€ä¸ª WikiSQL æ•°æ®é›†ï¼Œå¹¶æå‡ºäº† Text2SQL çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆä»¥åŠè¯„ä»·æŒ‡æ ‡ã€‚</p><p>ä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œè¯¥æ–¹æ¡ˆå­˜åœ¨ä¸å°‘ç¼ºç‚¹ï¼Œä¹‹åçš„æ–¹æ¡ˆä¼šç»§ç»­æ”¹è¿›ã€‚</p></div><!----></div><footer class="page-footer" data-v-5b0e3d8f data-v-bb1af879><!----><div class="contributors" data-v-bb1af879><span class="contributors-label" data-v-bb1af879>è´¡çŒ®è€…: </span><span class="contributors-info" data-v-bb1af879><!--[--><!--[--><span class="contributor" title="email: yubin_SkyWalker@yeah.net" data-v-bb1af879>yubinCloud</span><!----><!--]--><!--]--></span></div><!----></footer><!----><!--]--></div></div></div></div><button style="display:none;" type="button" class="back-to-top-button" aria-label="back to top" data-v-ba475dda data-v-b42999a2><span class="percent" data-v-b42999a2>0%</span><span class="show icon vpi-back-to-top" data-v-b42999a2></span><svg aria-hidden="true" data-v-b42999a2><circle cx="50%" cy="50%" style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-b42999a2></circle></svg></button><footer class="plume-footer" data-v-ba475dda data-v-46d530a6><div class="container" data-v-46d530a6><p class="message" data-v-46d530a6>Power by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://github.com/pengzhanbo/vuepress-theme-plume">vuepress-theme-plume</a></p><!----></div></footer><!--]--></div><!--]--></div><!--[--><!--]--><!--]--></div><script type="module" src="/research-notebook/assets/app-s5JIphqh.js" defer></script></body></html>