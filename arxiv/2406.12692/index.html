<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.9" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.55" /><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();</script><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><title>ğŸŒ™ MAGICï¼šä¸º Text2SQL ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ self-correction guideline</title><meta name="description" content=""><link rel="preload" href="/research-notebook/assets/style-Cec0e0LW.css" as="style"><link rel="stylesheet" href="/research-notebook/assets/style-Cec0e0LW.css"><link rel="modulepreload" href="/research-notebook/assets/app-s5JIphqh.js"><link rel="modulepreload" href="/research-notebook/assets/index.html-7G48gGCA.js"><link rel="prefetch" href="/research-notebook/assets/index.html-B-j-ryWq.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D4spU_9v.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-B0-1BBu1.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-SLLIY8d9.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C65jmr_M.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C-bL2yAS.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C7B5e00U.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Nt9kYeWR.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CE_bMlSy.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CLhUsc3g.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DXgEbOI-.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-v1oOswjF.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CBJ8xjXF.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D4Fq4d_T.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-ByB-z2iB.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Q9nU2u_y.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D8yUAJ7Y.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Dtno56yj.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BDK4L6jX.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-Dc5x4woP.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-eGfCPn-9.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-D70LzGEm.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BPemUoR7.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BwgVpDih.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DlaBYZPe.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CgVNpCXw.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-G5FDBLuS.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-uDKSTe9v.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BVMJJZGD.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CrHd4gIE.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BiSS2sK0.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DXcBEjAg.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CQoGuxuN.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CRi0y6sX.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BKNM53Nr.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C0kRXJHb.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-QyJX4BVb.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CJvsDrCW.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BwT074si.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-sp3GJ4_Y.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C3rZacVL.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-B0q2VZS4.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CYDgqNcV.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CDChQk7d.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-C9fq1LXw.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-_hma_Fnn.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BlT-qKyg.js" as="script"><link rel="prefetch" href="/research-notebook/assets/404.html-V2miJEAG.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BcMo9zlU.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-CrhXs5dX.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-DEOpBtft.js" as="script"><link rel="prefetch" href="/research-notebook/assets/index.html-BKeLltu8.js" as="script"><link rel="prefetch" href="/research-notebook/assets/SearchBox-CGeHVkxs.js" as="script"></head><body><div id="app"><!--[--><div class="theme-plume" data-v-ba475dda><!--[--><!--[--><span tabindex="-1" data-v-4bbc90d0></span><a href="#LayoutContent" class="skip-link visually-hidden" data-v-4bbc90d0> Skip to content </a><!--]--><!----><div class="nav-wrapper" data-v-ba475dda data-v-7a402866><div class="navbar-wrapper" data-v-7a402866 data-v-c0f362fa><div class="container" data-v-c0f362fa><div class="title" data-v-c0f362fa><div class="navbar-title" data-v-c0f362fa data-v-b77839f9><a class="auto-link link title" href="/" data-v-b77839f9 data-v-5111f611><!--[--><!----> <!--]--><!----></a></div></div><div class="content" data-v-c0f362fa><div class="curtain" data-v-c0f362fa></div><div class="content-body" data-v-c0f362fa><div class="navbar-search search" data-v-c0f362fa><div class="search-wrapper" data-v-60fa285e><!----><div id="local-search" data-v-60fa285e><button type="button" class="mini-search mini-search-button" aria-label="æœç´¢æ–‡æ¡£" data-v-60fa285e><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">æœç´¢æ–‡æ¡£</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="navbar-menu menu" data-v-c0f362fa data-v-b0c203ca><span id="main-nav-aria-label" class="visually-hidden" data-v-b0c203ca>Main Navigation</span><!--[--><!--[--><a class="auto-link link navbar-menu-link" href="/category/LM/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>LLM</i><!--]--><!----></a><!--]--><!--[--><a class="auto-link link navbar-menu-link" href="/category/LLM-evaluation/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>LLM è¯„ä¼°</i><!--]--><!----></a><!--]--><!--[--><a class="auto-link link navbar-menu-link" href="/category/RAG/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>RAG</i><!--]--><!----></a><!--]--><!--[--><a class="auto-link link navbar-menu-link" href="/category/Text2SQL/" data-v-b0c203ca data-v-c7242555 data-v-5111f611><!--[--><!----><i data-v-c7242555>Text2SQL</i><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="navbar-appearance appearance" data-v-c0f362fa data-v-376ec936><button class="switch-wrapper switch-appearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-376ec936 data-v-b27b6603 data-v-f90faf21><span class="check" data-v-f90faf21><span class="icon" data-v-f90faf21><!--[--><span class="vpi-sun sun" data-v-b27b6603></span><span class="vpi-moon moon" data-v-b27b6603></span><!--]--></span></span></button></div><!----><div class="flyout-wrapper navbar-extra extra" data-v-c0f362fa data-v-7914c0f6 data-v-7e56bc7a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-7e56bc7a><span class="vpi-more-horizontal icon" data-v-7e56bc7a></span></button><div class="menu" data-v-7e56bc7a><div class="menu-wrapper" data-v-7e56bc7a data-v-b4fba565><!----><!--[--><!--[--><!----><div class="group" data-v-7914c0f6><div class="item appearance" data-v-7914c0f6><p class="label" data-v-7914c0f6>å¤–è§‚</p><div class="appearance-action" data-v-7914c0f6><button class="switch-wrapper switch-appearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-7914c0f6 data-v-b27b6603 data-v-f90faf21><span class="check" data-v-f90faf21><span class="icon" data-v-f90faf21><!--[--><span class="vpi-sun sun" data-v-b27b6603></span><span class="vpi-moon moon" data-v-b27b6603></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-c0f362fa data-v-7e5802de><span class="container" data-v-7e5802de><span class="top" data-v-7e5802de></span><span class="middle" data-v-7e5802de></span><span class="bottom" data-v-7e5802de></span></span></button></div></div></div></div><!----></div><!----><!----><div id="LayoutContent" class="layout-content" data-v-ba475dda data-v-094016f3><!--[--><div class="has-aside plume-page" data-v-5b0e3d8f><div class="container" data-v-5b0e3d8f><div class="aside" data-v-5b0e3d8f><div class="aside-container" data-v-5b0e3d8f><div class="aside-content" data-v-5b0e3d8f><div class="page-aside" data-v-5b0e3d8f data-v-f8c78049><div class="has-outline page-aside-outline" data-v-f8c78049><div class="content" data-v-f8c78049><div class="outline-marker" data-v-f8c78049></div><div class="outline-title" data-v-f8c78049><span data-v-f8c78049>æ­¤é¡µå†…å®¹</span><span class="vpi-print icon" data-v-f8c78049></span></div><nav aria-labelledby="doc-outline-aria-label" data-v-f8c78049><span id="doc-outline-aria-label" class="visually-hidden" data-v-f8c78049> Table of Contents for current page </span><ul class="root" data-v-f8c78049 data-v-9a83b7a1><!--[--><li data-v-9a83b7a1><a class="outline-link" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»" data-v-9a83b7a1>ä¸€ã€è®ºæ–‡é€Ÿè¯»</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#äºŒã€magic" data-v-9a83b7a1>äºŒã€MAGIC</a><ul class="nested" data-v-9a83b7a1 data-v-9a83b7a1><!--[--><li data-v-9a83b7a1><a class="outline-link" href="#_2-1-feedback-correction-cycle" data-v-9a83b7a1>2.1 Feedback-correction cycle</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#_2-2-revising-agents-instruction" data-v-9a83b7a1>2.2 Revising agents&#39; instruction</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#_2-3-guideline-generation" data-v-9a83b7a1>2.3 Guideline generation</a><!----></li><!--]--></ul></li><li data-v-9a83b7a1><a class="outline-link" href="#ä¸‰ã€æ‰€æœ‰ç”¨åˆ°çš„-prompts" data-v-9a83b7a1>ä¸‰ã€æ‰€æœ‰ç”¨åˆ°çš„ prompts</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#å››ã€å®éªŒ" data-v-9a83b7a1>å››ã€å®éªŒ</a><!----></li><li data-v-9a83b7a1><a class="outline-link" href="#äº”ã€æ€»ç»“" data-v-9a83b7a1>äº”ã€æ€»ç»“</a><!----></li><!--]--></ul></nav></div></div></div></div></div></div><div class="content" data-v-5b0e3d8f><div class="content-container" data-v-5b0e3d8f><!--[--><!----><h1 class="page-title" data-v-dbc950ba>ğŸŒ™ MAGICï¼šä¸º Text2SQL ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ self-correction guideline</h1><div class="page-meta-wrapper" data-v-dbc950ba><p class="author" data-v-dbc950ba><span class="icon vpi-user" data-v-dbc950ba></span><span data-v-dbc950ba>Bin Yu</span></p><p class="reading-time" data-v-dbc950ba><span class="vpi-books icon" data-v-dbc950ba></span><span data-v-dbc950ba>1181å­—</span><span data-v-dbc950ba>çº¦4åˆ†é’Ÿ</span></p><!----><p class="create-time" data-v-dbc950ba><span class="vpi-clock icon" data-v-dbc950ba></span><span data-v-dbc950ba>2024-06-25</span></p></div><!--]--><!--[--><div style="position:relative;" data-v-5b0e3d8f><div class="plume-content" data-v-5b0e3d8f><blockquote><p>è®ºæ–‡ï¼š<a href="http://arxiv.org/abs/2406.12692" target="_blank" rel="noopener noreferrer">MAGIC: Generating Self-Correction Guideline for In-Context Text-to-SQL<span class="vpi-external-link external-icon" data-v-9f412e4e></span></a></p><p>â­â­â­â­</p><p>è±é¡¿å¤§å­¦ &amp; Microsoft, arXiv:2406.12692</p></blockquote><h2 id="ä¸€ã€è®ºæ–‡é€Ÿè¯»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è®ºæ–‡é€Ÿè¯»"><span>ä¸€ã€è®ºæ–‡é€Ÿè¯»</span></a></h2><p>DIN-SQL æ¨¡å‹ä¸­ä½¿ç”¨äº†ä¸€ä¸ª self-correction æ¨¡å—ï¼Œä»–æŠŠ LLM ç›´æ¥ç”Ÿæˆçš„ SQL å¸¦ä¸Šä¸€äº› guidelines çš„ promptï¼Œè®© LLM è¿›è¡Œè‡ªæˆ‘æ£€æŸ¥å¹¶æ”¹æ­£è¿™ä¸ªé”™è¯¯çš„ SQLã€‚ä½†æ˜¯è¿™é‡Œçš„ guidelines æ˜¯äººå·¥æ‰‹å†™çš„ï¼Œæ¯”å¦‚ä¸‹å›¾æ˜¯ DIN-SQL ä¸­çš„ self-correction guidelines çš„ promptï¼š</p><!----><p>è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨ç”Ÿæˆ self-correction guidelines çš„æ–¹æ³•ï¼š<mark>MAGIC</mark>ã€‚</p><p><strong>ä»»åŠ¡å®šä¹‰</strong>ï¼šç»™å®š user questionã€DB schema å’Œä¸€ä¸ªé”™è¯¯çš„ SQLï¼Œç”Ÿæˆä¸€ä¸ª self-correction guidelinesï¼Œå¯ä»¥ prompt LLM æ¥çº æ­£é”™è¯¯çš„ SQL ä»è€Œå¾—åˆ°çº æ­£æ­£ç¡®çš„ SQLã€‚è¿™ä¸ªä»»åŠ¡å°±æ˜¯æœ¬è®ºæ–‡éœ€è¦è§£å†³çš„ä»»åŠ¡â€”â€”<mark>self-correction guideline generation</mark> ä»»åŠ¡ã€‚</p><blockquote><p>è¾“å…¥ä¸­çš„é”™è¯¯çš„ SQL å°±æ˜¯åŸå…ˆç”± LLM ç”Ÿæˆçš„ SQL ä½†ä¸èƒ½æ­£ç¡®æ‰§è¡Œçš„ SQLã€‚</p></blockquote><p>ä¸‹å›¾å°±æ˜¯ LLM ä½¿ç”¨ self-correction guidelines æ¥çº æ­£é”™è¯¯ SQL çš„ç¤ºä¾‹ï¼š</p><!----><p>å¯ä»¥çœ‹åˆ°ï¼ŒLLM å¯ä»¥æ ¹æ® guidelines æ¥æ£€æŸ¥è¿™ä¸ªé”™è¯¯ SQLï¼Œæ‰¾å‡ºå…¶ä¸­çš„é—®é¢˜ä»è€Œå¾—åˆ°ä¿®æ­£åçš„æ­£ç¡® SQLã€‚</p><h2 id="äºŒã€magic" tabindex="-1"><a class="header-anchor" href="#äºŒã€magic"><span>äºŒã€MAGIC</span></a></h2><p>å‡è®¾ä½¿ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">s&#39;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> è¡¨ç¤º incorrect SQLï¼Œä½¿ç”¨ <code>s^{gt}</code> è¡¨ç¤º ground-truth SQLã€‚</p><p>MAGIC ç”± 3 ä¸ª agent ç»„æˆï¼šmanager agentã€feedback agent å’Œ correction agentã€‚</p><h3 id="_2-1-feedback-correction-cycle" tabindex="-1"><a class="header-anchor" href="#_2-1-feedback-correction-cycle"><span>2.1 Feedback-correction cycle</span></a></h3><p>ç»™å®šä¸€ä¸ª user questionã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mrow><mi>g</mi><mi>t</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s^{gt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7936em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span>ã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">s&#39;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œé‚£ manager agent å°±å¼€å§‹ä¸€ä¸ª feedback-correction cycleï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ã€‚</p><p>åœ¨æ¯ä¸€ä¸ª iteration ä¸­ï¼š</p><ul><li>manager agent è¦æ±‚ feedback agent é€šè¿‡å¯¹æ¯” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">s&#39;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mrow><mi>g</mi><mi>t</mi></mrow></msup></mrow><annotation encoding="application/x-tex">s^{gt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7936em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span> æ¥ç”Ÿæˆä¸€ä¸ª <strong>feedback</strong> æ¥è§£é‡Š <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">s&#39;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> ä¸­çš„é”™è¯¯</li><li>ä¹‹åï¼Œmanager agent å°†æ¥æ”¶åˆ°çš„ feedback ç»™ correction agentï¼Œè¦æ±‚å®ƒæ ¹æ® feedback ä¿®æ­£ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">s&#39;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> ä»è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„ <strong>revised SQL</strong></li></ul><p>é‡å¤è¿›è¡Œè¿­ä»£ï¼Œç›´åˆ° revised SQL æ­£ç¡®æˆ–è€…è¿­ä»£æ¬¡æ•°è¾¾åˆ°æœ€å¤§é™åˆ¶ã€‚</p><h3 id="_2-2-revising-agents-instruction" tabindex="-1"><a class="header-anchor" href="#_2-2-revising-agents-instruction"><span>2.2 Revising agents&#39; instruction</span></a></h3><p>åˆšåˆš feedback-correction cycle æ˜¯è¯´äº† manager agent äº¤äº’çš„æµç¨‹æ¥ä¸æ–­ä¿®æ­£ SQLã€‚</p><p>è¿™é‡Œæ˜¯åœ¨è¯´ manager agent åœ¨äºå¦å¤–ä¸¤ä¸ª agent äº¤äº’æ—¶ï¼Œæ‰€ä½¿ç”¨çš„ prompt ä¹Ÿæ˜¯åœ¨ä¸æ–­è¢«ä¿®æ­£çš„ã€‚</p><p>åœ¨ feedback-correction cycle çš„ç¬¬ä¸€ä¸ª iteration ä¸­ï¼Œmanager agent ä½¿ç”¨äº†ä¸¤ä¸ª predefined prompts æ¥ä¸ feedback-agent å’Œ correction-agent åšçš„äº¤äº’ã€‚ä½†æ˜¯å¦‚æœä¸€æ¬¡ iteration å <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">s&#39;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> ä»ç„¶æ²¡æœ‰è¢«ä¿®æ­£æ­£ç¡®ï¼Œé‚£ä¹ˆ manager agent ä¹Ÿè¦ä¿®æ­£è¿™äº› predefined promptsã€‚</p><p>é‚£ manager agent æ€ä¹ˆä¿®æ­£ prompts å‘¢ï¼Ÿâ€”â€” ä½¿ç”¨ä¸€ä¸ªä¸“é—¨è®¾è®¡çš„ prompt æ¥æç¤º LLM æ¥ä¿®æ­£ predefined promptsã€‚</p><h3 id="_2-3-guideline-generation" tabindex="-1"><a class="header-anchor" href="#_2-3-guideline-generation"><span>2.3 Guideline generation</span></a></h3><p>å½“ correction agent æ¯æ¬¡ä¿®æ­£æˆåŠŸä¸€ä¸ª SQL åï¼Œmanager agent ä¼šè®°ä¸‹æ¥è¿™ä¸€è½® iteration ä¸­ç”± feedback agent ç”Ÿæˆçš„ feedbackã€‚</p><blockquote><p>å› ä¸ºæ˜¯è¿™ä¸€ä¸ª feedback æ¥è®© correction agent ä¿®æ­£æ­£ç¡®çš„ï¼Œæ‰€ä»¥è¿™ä¸€ä¸ª feedback æ˜¯æŒ‡å‡ºäº† SQL é”™è¯¯çš„å…³é”®ï¼Œå› æ­¤è®© manager agent è®°ä¸‹æ¥ã€‚</p></blockquote><p>æ¯ä¸ª data point ä¼šåœ¨ç»è¿‡ä¸€ä¸ª feedback-correction cycle åè®°å½•ä¸€ä¸ª feedback åˆ° memory ä¸­ï¼Œå½“ manager agent è®°å½•çš„ feedbacks ç´¯è®¡è¾¾åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> ä¸ªä¹‹åï¼Œä¼šå°†è¿™ä¸€ batch çš„ k ä¸ª feedbacks ä¸€åŒå½¢æˆä¸€ä¸ª self-correction guidelineã€‚</p><p>è¿™ä¸ª self-correction guideline ä¼šè¢«ç”¨äºä¹‹åçš„ Text2SQL çš„ self-correction è¿‡ç¨‹ä¸­ï¼Œç›´åˆ°åˆç´¯ç§¯åˆ° k ä¸ª feedbacks åé‡æ–°è§¦å‘ç”Ÿæˆä¸€ä¸ª self-correction guidelineã€‚</p><p>åˆ©ç”¨ k ä¸ª feedbacks æ¥ç”Ÿæˆ guideline çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„ prompt æ¥æç¤º LLM ç”Ÿæˆã€‚</p><p>åœ¨ç¬¬ä¸€ä¸ª batch ä¸­ï¼Œè¿˜æ²¡æœ‰å¯ç”¨çš„ guidelineï¼Œè¿™æ—¶ manager agent ä¼šå…ˆåˆå§‹åŒ–ä¸€ä¸ª guidelineï¼Œä¹‹åçš„æ¯ä¸ª batchï¼Œmanager agent ä¼šæ›´æ–°ç°åœ¨çš„ guidelineã€‚</p><h2 id="ä¸‰ã€æ‰€æœ‰ç”¨åˆ°çš„-prompts" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ‰€æœ‰ç”¨åˆ°çš„-prompts"><span>ä¸‰ã€æ‰€æœ‰ç”¨åˆ°çš„ prompts</span></a></h2><p>è¿™é‡Œæ€»ç»“ä¸€ä¸‹æ•´ä¸ªæ–¹æ³•æ‰€ä½¿ç”¨çš„ promptsï¼š</p><ul><li>ä¸¤ä¸ª predefined promptsï¼šè¿™ä¸¤ä¸ª prompts ç”¨æ¥ä¸€å¼€å§‹æ—¶ manager agent ç”¨æ¥ä¸ feedback agent å’Œ correction agent è¿›è¡Œäº¤äº’ã€‚</li><li>manager agent ç”¨æ¥ä¿®æ­£ predefined prompts çš„ä¸¤ä¸ª promptsï¼šä¸€ä¸ª prompt ç”¨æ¥è®© manager agent ä¿®æ­£ä¸ feedback agent äº¤äº’æ‰€ç”¨çš„ promptï¼Œä¸€ä¸ªæ˜¯ä¿®æ­£ä¸ correction agent çš„ã€‚</li><li>manager agent ç”¨æ¥å°† k ä¸ª feedbacks ç”Ÿæˆå‡ºä¸€ä¸ª self-correction guideline çš„ promptã€‚</li></ul><h2 id="å››ã€å®éªŒ" tabindex="-1"><a class="header-anchor" href="#å››ã€å®éªŒ"><span>å››ã€å®éªŒ</span></a></h2><p>ä»¥å¾€çš„ DIN-SQL ä¸­å°±æœ‰ä¸€ä¸ª self-correction moduleï¼Œè¿™ä¸ªæ¨¡å—ä½¿ç”¨ä¸€ä¸ª guideline æ¥è®© LLM ä¿®æ­£é”™è¯¯çš„ SQLï¼Œä½†è¿™ä¸ªæ¨¡å‹ä¸­çš„ guideline æ˜¯äººå·¥è®¾è®¡çš„ã€‚è¿™ç¯‡è®ºæ–‡å°è¯•å°†è¿™ä¸ªæ¨¡å—çš„ guideline æ›´æ¢ä¸ºä½¿ç”¨æœ¬æ–‡æå‡ºçš„è‡ªåŠ¨ç”Ÿæˆçš„ guidelineï¼Œå‘ç°æ•´ä¸ª Text2SQL æ¨¡å‹çš„è¡¨ç°å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä»è€Œè¯æ˜äº†æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚</p><h2 id="äº”ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#äº”ã€æ€»ç»“"><span>äº”ã€æ€»ç»“</span></a></h2><p>è¿™ç¯‡è®ºæ–‡ç€é‡æŒ‡å‡ºäº† in-context learning çš„ Text2SQL ä»»åŠ¡ä¸­ self-correction çš„æ–°é¢–è§†è§’ï¼Œå°†æå‡ Text2SQL ä¸­çš„ self-correction ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡ï¼Œå…‹æœäº†ä»¥å¾€æ–¹æ³•éœ€è¦æ‰‹å·¥è®¾è®¡ self-correction guideline çš„ç¼ºç‚¹ã€‚</p><p>åŒæ—¶ï¼Œè¿™ç¯‡è®ºæ–‡è¿˜è§£å†³äº†è‡ªåŠ¨ä¿®å¤äººç±»ç”Ÿæˆçš„é”™è¯¯ SQL çš„é‡è¦ä»»åŠ¡ï¼Œå±•ç¤ºäº† LLM è¿›è¡Œè‡ªæˆ‘æ ¡æ­£çš„èƒ½åŠ›ã€‚</p></div><!----></div><footer class="page-footer" data-v-5b0e3d8f data-v-bb1af879><!----><div class="contributors" data-v-bb1af879><span class="contributors-label" data-v-bb1af879>è´¡çŒ®è€…: </span><span class="contributors-info" data-v-bb1af879><!--[--><!--[--><span class="contributor" title="email: yubin_SkyWalker@yeah.net" data-v-bb1af879>yubinCloud</span><!----><!--]--><!--]--></span></div><!----></footer><!----><!--]--></div></div></div></div><button style="display:none;" type="button" class="back-to-top-button" aria-label="back to top" data-v-ba475dda data-v-b42999a2><span class="percent" data-v-b42999a2>0%</span><span class="show icon vpi-back-to-top" data-v-b42999a2></span><svg aria-hidden="true" data-v-b42999a2><circle cx="50%" cy="50%" style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-b42999a2></circle></svg></button><footer class="plume-footer" data-v-ba475dda data-v-46d530a6><div class="container" data-v-46d530a6><p class="message" data-v-46d530a6>Power by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://github.com/pengzhanbo/vuepress-theme-plume">vuepress-theme-plume</a></p><!----></div></footer><!--]--></div><!--]--></div><!--[--><!--]--><!--]--></div><script type="module" src="/research-notebook/assets/app-s5JIphqh.js" defer></script></body></html>